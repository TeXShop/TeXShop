\documentclass[11pt, oneside]{amsart}
\usepackage{geometry}     
\geometry{letterpaper}         
\usepackage[parfill]{parskip} 
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\usepackage{url}

\title{The Sage Engine}
\author{Richard Koch}

\begin{document}
\maketitle
\vspace{-.3in}
\section{Sage}
Sage is a mathematical software system providing an open source alternative to Magma, Maple, Mathematica, and Matlab. It is available from 
\url{http://www.sagemath.org/} as a free download. The program provides all of the standard features expected from such a system: arbitrary precision arithmetic, symbolic integration and differentiation, two-dimensional plotting of functions, matrix algebra, and much more.

Download sage from this web site. Move the resulting ``Sage'' program to /Applications. 

SageTeX is a piece of the Sage download. It is basically a LaTeX style file, which  allows users to embed and process Sage code from within TeX files. The last three pages of this document show this style file in action. The source code on page three is followed by LaTeX output on pages four and five. In the source file, the initial line
\begin{verbatim}
     % !TEX TS-program = sage
\end{verbatim}
tells TeXShop to process the file using the sage engine; this engine first calls pdflatex, then calls sage, and finally calls pdflatex again.
The remaining lines in the preamble are standard LaTeX commands, except the required line
\begin{verbatim}
     \usepackage{sagetex}
\end{verbatim}
In the remaining source, sage commands are entered within lines of the form
\begin{verbatim}
     \sage{....}
\end{verbatim}
These line cause sage to process commands and output LaTeX source fragments, which become part of the LaTeX document.

Notice in particular that sage can plot standard functions. Sage can also compute integrals symbolically; for example, look carefully at the command which processes $\int {{x^2 + x + 1} \over {(x - 1)^3 (x^2 + x + 2)}}$. This command contains standard LaTeX code to display the integral, but then Sage integrates and returns a typeset copy of the result.

\newpage
\section{Setting Up the Engine}

This folder contains an engine file named ``sage.engine''. Move this file to the active portion of $\sim$/Library/TeXShop/Engines. The fifth line from the bottom of this engine contains a full path to the sage binary inside the Sage program, and includes the precise name of the version of Sage downloaded. This changes whenever Sage is updated, so edit the line appropriately. In the initial engine, the line reads
\begin{verbatim}
/Applications/Sage-5.9-OSX-64bit-10.8.app/Contents/Resources/sage/sage "$sagename"
\end{verbatim}
Here ``/Applications/Sage-5.9-OSX-64bit-10.8.app'' is the name of the current Sagetex being
used, and ``/Contents/Resoures/sage/sage'' reaches inside the application bundle to find the
sage binary it contains.

Dan Drake, who is responsible for SageTeX, wrote this engine.

One final step is required to use SageTeX. The ``Sage'' program contains a style file named ``sagetex.sty'' and a number of support files. This style file must be copied to your TeX distribution. The file depends on other features of sage, so whenever you upgrade sage, you also need to upgrade sagetex.sty in your TeX distribution.

The sagetex.sty file is inside the Sage application. Recall that  OS X has a  control-click command to "Show Package Contents" of an application. Do
that with Sage, and navigate to Contents/Resources/sage/data/texmf/tex/generic/sagetex/sagetex.sty.
Copy this file  to ~/Library/texmf/tex/sagetex.sty.



\section{Final Remarks}
Although spaces are permitted in LaTeX source file names, Sage does not like spaces in file names. So LaTeX source file names which call SageTeX should not contain spaces. This problem is fixed in beta releases of SageTeX not yet in the sage distribution.

A Sage tutorial is available at the Sage page \url{http://www.sagemath.org/help.html}. It is definitely recommended. Extensive additional documentation is available at the same web page.
\end{document}

