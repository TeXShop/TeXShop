%%!TEX TS-program = pdflatexmk
%%!TEX encoding = UTF-8 Unicode
%%!TEX spellcheck = French

\documentclass[11pt,french]{article}
\usepackage[utf8]{inputenc}
%\usepackage[T1]{fontenc}
%\usepackage[body={6.0in,9.0in}, vmarginratio=1:1]{geometry}
%\usepackage[a4paper,twoside,textheight=25.1cm,heightrounded]{geometry} % allonge le texte, hors proportions
%Empagement courant (selon Hurtig : blancs tournants 2,1 2,625 3,15 3,675 en cm) 
\usepackage[a4paper,twoside,textwidth=15.75cm,textheight=24.1cm,heightrounded]{geometry} 

%Empagement luxe (selon Hurtig : blancs tournants 2,8 3,5 4,2 4,9 en cm)
%\usepackage[a4paper,twoside,textwidth=14cm,textheight=21.3cm,heightrounded]{geometry} 

%Empagement au 9e
%\usepackage[a4paper,twoside,left=2.3333333cm,textwidth=14cm,top=3.3cm,textheight=19.8cm,heightrounded]{geometry} 

%Empagement au 12e
%\usepackage[a4paper,twoside,left=1.75cm,textwidth=15.75cm,top=2.475cm,textheight=22.275cm,heightrounded]{geometry} 

%\usepackage{lipsum}

%Autre empagements
%\usepackage[a4paper,twoside,textheight=23.5cm,heightrounded]{geometry} % allonge le texte, hors proportions
%\usepackage[a4paper,twoside,scale=0.8,heightrounded]{geometry} % allonge le texte en gardant les proportions
%\usepackage[a4paper,twoside,heightrounded]{geometry} % scale=0.7 par défaut

%Listes
%\usepackage{enumerate} % Ou enumitem !
\usepackage{enumitem} % Ou enumitem !
\setlist[itemize]{nosep}
%\setlist{wide=0pt} % Pour enumitem
%\usepackage{expdlist} % Ou enumitem

\usepackage[small,compact]{titlesec}

%%\usepackage[expert]{fourier}
%\usepackage{fourier}
%\usepackage[scaled=0.85]{berasans}
%\usepackage[scaled=0.85]{beramono}

\usepackage{booktabs}

% Include graphicx
\usepackage{graphicx}
%\usepackage{applekeys}

%\usepackage{microtype}

\usepackage{xcolor}
%\usepackage[colorlinks, urlcolor=darkgray, linkcolor=darkgray]{hyperref}

%\newcommand{\MacTeX}{Mac\TeX}
\newcommand{\MacTeX}{Mac\kern-.12em\TeX}
\newcommand{\BibTeX}{B\textsc{i\kern-.025em  b}\kern-.13em\TeX}
\newcommand{\conTeXt}{Con\kern-.12em\TeX t}
\newcommand{\TS}{\textsf{\TeX Shop}}
% default small caps used for utopia are ugly; don't want to use [expert] here.
%\newcommand{\acr}[1]{\textsc{#1}}
%\usepackage{relsize}
%\newcommand{\acr}[1]{\textrm{\smaller\uppercase{#1}}}
\newcommand{\acr}[1]{\textsf{#1}}
%\newcommand{\cmd}[1]{\texttt{#1}}
%\newcommand{\mnu}[1]{\texttt{#1}}
\newcommand{\cmd}[1]{\textsf{#1}}
\newcommand{\mnu}[1]{\textsf{#1}}
\newcommand{\To}{\,\(\to\)\,}

% set | as a command character within verbatim so you can execute commands there
\usepackage{verbatim}
\makeatletter
\addto@hook\every@verbatim{\catcode`|=0}
\makeatother

% define colored items to be inserted in verbatim environments
\setlength{\fboxsep}{0pt}
\newcommand{\selmark}{\colorbox{cyan}{\rule[-0.5ex]{0ex}{2.1ex}\texttt{•}}}

%\usepackage[expert]{fourier}
\usepackage{fourier}
\usepackage[scaled=0.85]{berasans}
\usepackage[scaled=0.85]{beramono}

%Babel
\usepackage{babel,varioref}
\addto\captionsfrench{\def\tablename{\scshape Tableau}}
%\renewcommand*{\CaptionSeparator}{\space\textemdash\space}
\frenchbsetup{ShowOptions,og=«,fg=»}
\usepackage{xfrac}
\usepackage[decimalsymbol=comma,unitsep=cdot,digitsep=thick,mode=text,sepfour=true,valuesep=thick]{siunitx}
\usepackage[np,autolanguage]{numprint}

%%Caption, float, microtype
%\usepackage{caption,float}
%\usepackage[final,babel]{microtype}

%Caption, float, microtype
%\usepackage{caption,float}
\usepackage[textfont=it]{caption}
\usepackage{floatrow}
\floatsetup[table]{style=plaintop}
\usepackage{subfig}
%\captionsetup[subfloat]{labelformat=parens,labelsep=period}
%\captionsetup[subfloat]{labelformat=parens}
\captionsetup[subfloat]{labelformat=simple}
\usepackage[final,babel]{microtype}
%\usepackage[stretch=16,shrink=16,step=4,final]{microtype} plus tolérant des débordements
%\usepackage[babel=true,kerning=true]{microtype} % supprime l'activation des ponctuations hautes !

\usepackage{url}
%HYPERREF
\usepackage[colorlinks=true,linkcolor=black,urlcolor=blue]{hyperref}
\usepackage{cleveref}

\title{Conseils et astuces pour \TS\\\small v0.7.4--2016/02/24\thanks{Traduit par René Fritz le 26 février 2016.}}
\author{H. Schulz\\\small\href{mailto:herbs2@mac.com}{herbs2@mac.com}}
\date{}

\begin{document}
\maketitle

\tableofcontents

\begin{center}
\rule{0.5\textwidth}{1pt}
\end{center}

\section{Introduction}

\TS\ est une « interface » \emph{(Front End)} pour une distribution \TeX\ sur Mac OS~X. Il permet de créer et d'éditer des fichiers source \TeX{}, d'interagir avec la distribution \TeX\ (p. ex., composer le fichier source) et enfin de donner un aperçu du fichier \acr{pdf} final. Il permet également d'aller et venir entre l'aperçu et le source.

%\TS\ is a ``Front End'' for a \TeX\ distribution on Mac OS~X. As such it allows the user to create and edit \TeX\ source files, interact with the \TeX\ distribution (e.g., typeset the source file) and, finally preview the final \acr{pdf} file. It also allows the user to go back and forth between preview and source.

Au fil des ans \TS\ a ajouté de nombreuses fonctionnalités. Certaines d'entre elles sont claires et sont faites pour aider un débutant. D'autres sont un peu plus subtiles dans leur utilisation et leur pouvoir sous-jacent mérite d'être apprivoisé.

%Over the years \TS\ has added many features. Some of them are obvious and are meant to help a novice get started. Others are a bit more subtle in their use and the underlying power of these features needs to be coaxed out.

\subsection{Ce que vous ne trouverez pas ici}
%\subsection{What Isn't Here}

Tout d'abord, cet article \emph{ne traite pas} de \TeX\ ou \LaTeX. Je n'ai pas l'intention de vous apprendre à écrire un source \TeX{}. Il y a beaucoup de livres et articles bien faits qui vous enseigneront comment devenir un \TeX pert ou, du moins, un \TeX pätzer\footnote{Selon l'auteur, un \emph{Pätzer}, désigne un mauvais joueur d'échecs.} comme moi.
 
Bien qu'il renferme des éléments d'introduction, il n'est cependant \emph{pas} conçu comme un manuel exhaustif sur \TS\ pour les nuls. Au fil du temps, il pourrait évoluer vers un tel document, mais je dois commencer quelque part et je n'en suis qu'au début.

%This article is, first of all, \emph{not} about \TeX\ or \LaTeX. I don't intend to teach you how to write \TeX\ source. There are many fine books and articles that will teach you how to become a \TeX pert or, at least, a \TeX pätzer like me.
%
%Although there is some introductory material it is also \emph{not} meant as a complete manual for the use of \TS\ for the total novice. Over time it might evolve into such a document but I've got to start somewhere and this is that start.

\subsection{Ce qui est ici}
%\subsection{What Is Here}

Dans cet article, je souhaite vous présenter quelques-unes des subtilités qui rendront votre vie d'éditeur de source \TeX\ plus facile. Il s'agit, notamment, d'ajouter des commandes de clavier et d'étendre les capacités d'édition de \TS{} ; d'alléger votre travail dans la création de documents, etc., en utilisant des macros et le complètement de commande ; et, enfin, de savoir comment on peut étendre les capacités de traitement de \TS\ grâce aux moteurs.

%In this article I hope to introduce you to some of the more subtle things you can do to make your life as a \TeX\ source editor easier. These include adding keyboard commands and extending the editing capabilities of \TS; helping you make short(er) work of creating documents, etc., with the use of Macros and Command Completion; and, finally, how one can extend the processing capabilities of \TS\ using Engines.

\section{Édition, composition et visualisation --- le cycle de travail}
%\section{Editing, Typesetting and Viewing --- the Work Cycle}

%Dans ce document, c'est la section la plus proche des débutants.

Cette section est celle des débutants.

%This is about as close to a beginner's section you will get in this document.

\subsection{Édition du fichier source}
%\subsection{Editing the Source File}

La première chose que vous ayez à faire pour créer ce grand ouvrage est de le taper dans le document source qui sera composé et visualisé plus tard. Ceci nécessite d'entrer, à la fois, le balisage \LaTeX\ ainsi que vos merveilleux mots dans le document.

%The first thing you've got to do to create that great work is to type it into the source document that will be typeset and viewed later. This involves both putting \LaTeX\ markup as well as your wonderful words into the document.

Pour débuter, vous pouvez ouvrir un nouveau document en utilisant \mnu{Fichier}\To\mnu{Nouveau} \mbox{(\cmd{cmd-N})}, puis en remplir le préambule en choisissant un modèle dans le menu déroulant \mnu{Modèles} situé dans la fenêtre du source ou utiliser la commande \mnu{fichier}\To\mnu{Nouveau depuis la papeterie…} et choisir, dans la liste, le \mnu{Source} adéquat. Notez que la liste des modèles fournis est incomplète, si vous en avez dont vous pensez qu'ils seraient très utiles, n'hésitez pas à les soumettre pour inclusion dans \TS. Vous pouvez ajouter vos modèles et sources personnels dans \cmd{$\sim$/Bibliothèque/TeXShop/Templates} et dans \cmd{$\sim$/Bibliothèque/TeXShop/Stationery}. \textbf{\textsc{Remarques} ---  depuis \TS\ 3.58, vous pouvez utiliser le \mnu{TeXShop}\To\mnu{Ouvrir \cmd{$\sim$/Bibliothèque/TeXShop}}, pour ouvrir ce dossier dans le Finder : \cmd{$\sim$/bibliothèque} est le dossier \cmd{Bibliothèque} dans votre dossier \cmd{HOME}. \textsc{Notes} : depuis \textbf{Mac OS X 10.7} le dossier \cmd{Bibliothèque} est \emph{caché}, par défaut ; dans le \cmd{Finder}, tenir enfoncée la touche \cmd{alt}, cliquez sur le menu \mnu{Aller} et il sera disponible. Depuis \textbf{OS X 10.9} vous pouvez afficher en permanence la \cmd{$\sim$/Bibliothèque} dans votre dossier \cmd{HOME}, en ouvrant et sélectionnant votre dossier \cmd{HOME}, puis en choisissant, \mnu{Présentation}\To\mnu{Afficher les options de présentation} (\cmd{cmd-J}), dans le \cmd{Finder} ; et y cocher \cmd{Afficher le dossier bibliothèque}.}

%To get started you can open a new document using \mnu{File}\To\mnu{New} (\cmd{Cmd-N}) and then fill in the start of a new document by choosing a template from the \mnu{Templates} popup menu in the Source Window or use the \mnu{File}\To\mnu{New From Stationery…} command and picking appropriate Stationery from the list. Note that the templates and stationery provided are certainly not complete; if you have some that you think are of general use feel free to submit them for inclusion in \TS. You can add personal Templates and Stationery to \path{~/Library/TeXShop/Templates} and \path{~/Library/TeXShop/Stationery} respectively. \textbf{Note: In \TS\ 3.58 and later you can use the \mnu{TeXShop}\To\mnu{Open \path{~/Library/TeXShop}} to open that folder in Finder. Note: \path{~/Library} is the \cmd{Library} folder in your \cmd{HOME} folder. Note: Under \textsf{Mac OS X 10.7 and later} the \cmd{Library} folder is ``hidden'' by default; in \cmd{Finder} hold the \cmd{Opt} key down and click on the \mnu{Go} menu and it will be available. Under \textsf{OS X 10.9 and later} you can permanently show the \path{~/Library} in your \cmd{HOME} folder by opening and selecting your \cmd{HOME} folder, choosing \mnu{View}\To\mnu{Show View Options} (\cmd{Cmd-J}) in \cmd{Finder} and then checking \cmd{Show Library Folder}.}


\subsubsection{Palettes LaTeX et Matrice}
%\subsubsection{\LaTeX\ \& Matrix Panels}

Même si je crois que les palettes à interface cliquable nuisent réellement à l'apprentissage, je vais signaler que \TS\ en a deux; l'une pour aider à la saisie du code \LaTeX\ (la \mnu{Palette LaTeX…}) et l'autre pour la mise en place de la structure de base d'une matrice ou d'un tableau (la \mnu{Palette Matrice…}). Elles sont activées ou désactivées dans le menu \mnu{Fenêtre} ou avec les raccourcis clavier\footnote{Les raccourcis sont donnés pour un clavier anglais et peuvent être différents pour d'autres claviers.} \cmd{alt-cmd-{}$-$} et \cmd{alt-cmd-$=$} respectivement. La \vref{LandMPanels} montre l'aspect de ces palettes.
%While I believe that panels with a clickable interface actually hinder learning I'll mention that \TS\ has two panels: one to help with entering \LaTeX\ code (the \LaTeX\ Panel) and one for setting up the basic structure of a matrix or tabular (the Matrix Panel). These are toggled on/off under the \mnu{Window} Menu or with the keyboard shortcuts\footnote{The given shortcuts are for the English localization and may be different with other localizations.} \cmd{Opt-Cmd-{}$-$} and \cmd{Opt-Cmd-=} respectively. Figure~(\ref{fig:LandMPanels}) shows what the panels look like.


\begin{figure}
%\centering
\subfloat[][]{%
\label{LPanel}
\framebox{\includegraphics[width=2.5in]{figs/paletteLatex}}}%
\qquad%
\subfloat[][]{%
\label{MPanel}
\framebox{\includegraphics[width=2.5in]{figs/paletteMatrice}}}%
\caption[Les panneaux LaTeX et Matrix.]{
\subref{LPanel} Le panneau LaTeX ; et
\subref{MPanel} le panneau Matrix.}
\label{LandMPanels}
\end{figure}

%\begin{figure}
%\includegraphics[width=2.5in]{figs/palette}\hfill\includegraphics[width=2.5in]
%{figs/matrice}
%\caption{Les panneaux LaTeX et Matrix.\label{fig:LandMPanels}}
%\end{figure}
Il est possible de faire quelques modifications et ajouts à la \mnu{Palette LaTeX} en modifiant le fichier \path{~/Library/TeXShop/LatexPanel/completion.plist}. \textbf{Note : tous les fichiers \path{plist} doivent être édités en utilisant le codage Unicode UTF-8.}

%It is possible to make a few changes and additions to the \LaTeX\ Panel by editing the 
%\path{~/Library/TeXShop/LatexPanel/completion.plist} file. \textbf{Note: all \path{plist} files must be edited using UTF-8 Unicode encoding.}

\begin{figure}
\centering
\framebox{\includegraphics[width=1.5in]{figs/etiquette}}
\caption{Liste du menu Étiquettes.\label{Tags}}
\end{figure}

\subsubsection{Menu Étiquettes}
%\subsubsection{The Tags Popup}

Le menu déroulant \mnu{Étiquettes} de la barre d'outils du source liste automatiquement les commandes de sectionnement pour vous permettre de passer rapidement à une partie pertinente de votre source. Vous pouvez ajouter votre propre étiquette à un endroit particulier de cette liste en plaçant dans le document la ligne
%The \mnu{Tags} popup menu on the Source Toolbar will automatically list sectioning commands so you can quickly jump to a relevant part of your document source. You can add your own tag to the list at a particular place in the document by placing the line
\begin{verbatim}
%:le nom de mon étiquette
\end{verbatim}
et elle apparaîtra alors à cette position dans la liste déroulante et, ainsi, vous pourrez sauter rapidement à cet endroit (voir \vref{Tags}). Désolé, les étiquettes des fichiers inclus avec \verb|\include| ou \verb|\input| ne sont pas insérées de façon récurrente.

%at that position and it will then appear in the popup list so you can jump to that location quickly. See Figure (\ref{fig:Tags}). Sorry, tags are not recursively included for files you \verb|\include| or \verb|\input|.
%\begin{figure}[H]
%\centering
%\framebox{\includegraphics[width=1.5in]{figs/etiquette}}
%\caption{Liste du menu Étiquettes.\label{Tags}}
%\end{figure}

\subsubsection{Rechercher ou remplacer}
%\subsubsection{Find/Replace}

%There are three \acr{Find/Replace} ``panels'' available with \TS\ 3.xx (two with \TS\ 2.xx). Each is discussed individually below. You choose the Find/Replace Panel you wish to use on the \mnu{Source} tab under \mnu{TeXShop}\To\mnu{Preferences}. You must restart \TS\ to enable any changes made to the Find/Replace Panel choice in \mnu{Preferences}.

%\begin{description}
%\item[Apple Find Panel]
%The traditional Apple Fine/Replace panel. A simple to use panel for finding and replacing text.   The Standard Apple Find/Replace Panel is shown in Figure~(\ref{fig:ApplePanel}) on page~\pageref{fig:ApplePanel}.
%\item[OgreKit Find Panel]
%An advanced Find/Replace panel that supports Regular Expressions (\acr{regex} for short) of various styles (press the More Options button to select the dialect). \acr{Regex} is a very advanced way to find and replace text and is a good investment of your time to learn. The OgreKit Find Panel with the \cmd{More Options} panel displayed is shown in Figure~(\ref{fig:Ogrekit}) on Page~\pageref{fig:Ogrekit}.
%\item[Apple Find Bar]
%Only available in \cmd{OS X 10.7} and later; and therefore only in \acr{\TS\ 3.xx}. It provides a drop down bar for doing Find with an additional line if you select Replace. See Figure~(\ref{fig:AppleBar}) on page~\pageref{fig:AppleBar} for an example of the Apple Find Bar; the additional Replace line is displayed.
%\end{description}

Il y a trois palettes de recherche dans \TS\ 3.xx (deux dans \TS\ 2.xx). Elles sont présentées ci-après. Pour choisir votre palette de recherche allez dans l'onglet \mnu{Document} de \mnu{TeXShop}\To\mnu{Préférences…} Vous devez redémarrer \TS\ pour activer les modifications apportées dans le choix de palette de recherche dans les \mnu{Préférences…}
\begin{description}[leftmargin=\parindent]
\item[Palette de recherche Apple]
Cette palette traditionnelle d'Apple permet de rechercher ou remplacer du texte facilement. Elle est présentée dans la \vref{figApplePanel}. %\vpageref{figApplePanel}. 
\item[Palette de recherche OgreKit]
Cette palette plus évoluée prend en charge les expressions courantes (\emph{Regular Expressions} ou \emph{\acr{regex}} en abrégé) dans différents styles (appuyez sur le bouton \mnu{Plus d'options} pour sélectionner la phraséologie). \acr{Regex} est une méthode plus évoluée pour trouver et remplacer du texte et son apprentissage est un bon investissement de votre temps. La palette de recherche OgreKit est illustée dans la \vref{figOgrekit} avec sa fenêtre \cmd{Plus d'options} sortie.
\item[Bannière de recherche Apple]
Uniquement disponible à partir de \cmd{OS X 10.7}, et donc seulement dans \acr{\TS\ 3.xx}. Pour rechercher, elle offre une barre déroulante pourvue d'une ligne complémentaire si vous sélectionnez \mnu{Remplacer}. La \vref{figAppleBar} montre l'aspect de la bannière de recherche Apple ; la ligne supplémentaire pour remplacer est affichée.
\end{description}

\begin{figure}
\centering
\subfloat[][]{%
\label{figApplePanel}
\framebox{\includegraphics[width=6.4cm]{figs/ApplePanel}}}%
\hfill%
\subfloat[][]{%
\label{figOgrekit}
\framebox{\includegraphics[width=9cm]{figs/OgreKitfr}}}%
\\[5pt]
\subfloat[][]{%
\label{figAppleBar}
\framebox{\includegraphics[width=12.5cm]{figs/AppleBar}}}
%\caption[Find/Replace Panels.]{The Find/Replace ``panels'' available in \TS:
\caption[Palettes de recherche/remplacement.]{Palettes pour rechercher ou remplacer disponibles dans \TS :
\subref{figApplePanel} la palette de recherche standard d'Apple ; %the standard Apple Find Panel; 
\subref{figOgrekit} la palette de recherche OgreKit avec sa fenêtre \cmd{Plus d'options} ouverte ; et % the Ogrekit Find Panel with the \cmd{More Options} panel displayed; and, 
\subref{figAppleBar} la bannière de recherche Appple disponible avec \TS\ \cmd{3.xx}.} % the Apple Find Bar available with \TS\ 3.xx.}
\label{FindPanels}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%NEW

%\subsubsection{Spell Checking}
\subsubsection{Vérification de l'orthographe}

%By default \TS\ allows you to use Apple's Spell Checker as built into most applications. Unfortunately that Spell Checker doesn't know anything about \LaTeX\ commands so there is a tendency to flag those commands as misspelled word. There are several Spell Check applications that are \LaTeX-aware with the two most popular being \cmd{Excalibur} (maintained by Rick Zaccone, currently at version 4.07 and installed in \path{/Applications/TeX/Excalibur} by the \MacTeX\ install package) and \cmd{cocoAspell} (by Anton Leuski and currently at version 2.1) which installs a \cmd{Spelling} Preference Pane in \cmd{System Preferences}. More information about these two Spell Checkers is found below.
%
%If you use different dictionaries for different documents (e.g., English or German depending upon the document) you can have \TS\ automatically choose the proper dictionary on a document by document basis by placing a line like

%Vérification de l'orthographe

Par défaut \TS\ vous permet d'utiliser le correcteur d'orthographe d'Apple tel qu'intégré dans la plupart des applications. Malheureusement, ce correcteur d'orthographe ne sait rien des commandes \LaTeX\ et il a tendance à les signaler comme mal orthographiées. Plusieurs vérificateurs d'orthographe intègrent \LaTeX, les deux plus populaires étant \cmd{Excalibur} (maintenu par Rick Zaccone, actuellement à la version 4.07 et installé dans \path{/Applications/TeX/Excalibur} par  \MacTeX) et \cmd{cocoAspell} (de Anton Leuski et actuellement à la version 2.1) qui installe le panneau de préférences \cmd{Spelling} dans les \cmd{Préférences Système…} Pour plus d'informations sur ces deux correcteurs d'orthographe voir ci-dessous.

Si vous utilisez différents dictionnaires dans différents documents (p. ex., en anglais ou en allemand selon le document), vous pouvez faire en sorte que \TS\ choisisse automatiquement le dictionnaire approprié dans votre document en plaçant la ligne suivante

\begin{verbatim}
% !TEX spellcheck = English
\end{verbatim}
%(for the \cmd{English (Aspell)} dictionary in this case) near the top of each document. Search for \cmd{checking spelling} in \TS's \mnu{Help}\To\mnu{TeXShop Help Panel…} for more detailed information on the designation of a particular dictionary.
(pour le dictionnaire \cmd{English (Aspell)} dans le cas présent) dans le haut de chaque document. Pour obtenir des informations plus détaillées sur la désignation d'un dictionnaire particulier recherchez \cmd{checking spelling} dans le menu \mnu{Aide}\To\mnu{Aide de TeXShop…}

\paragraph{\cmd{Excalibur}}

%The \cmd{Excalibur} Spell Checker is a stand-alone application that reads in a Source file, allows you to run a spell check which you then Save as a modified Source file; \TS\ automatically picks up the changes in that Source file. There are several versions of Macros that allow you to run \cmd{Excalibur} from within \TS. One by Michael Sharpe (with minor modifications by H. Schulz) can be downloaded from <\url{https://dl.dropbox.com/u/10932738/index.html}> as \cmd{TeXShopExcaliburMacro.zip}. With any of those macros \TS\ automatically picks up the spell checked and saved version of the Source file and \emph{replaces} the old contents of the displayed Source document by the spell checked version; any changes you make to the Source file while \cmd{Excalibur} is still correcting the document \emph{will be lost} so don't do that!
%
%More dictionaries for \cmd{Excalibur} are available at <\url{http://excalibur.sourceforge.net}>.

Le correcteur d'orthographe \cmd{Excalibur} est une application autonome qui lit dans le fichier source. Il vous permet d'exécuter une vérification orthographique que vous enregistrez ensuite en un fichier source modifié ; \TS\ sélectionne automatiquement les modifications dans ce fichier source. Il existe plusieurs macros qui permettent d'exécuter \cmd{Excalibur} depuis \TS. L'une d'elles, de Michael Sharpe (avec des modifications mineures de H. Schulz), intitulée \cmd{TeXShopExcalibur-Macro.zip}, peut être téléchargée depuis <\url{https://dl.dropbox.com/u/10932738/index.html}>. Avec ces macros \TS\ sélectionne automatiquement le correcteur d'orthographe et la version enregistrée du fichier source et \emph{remplace} l'ancien contenu du document source affiché par la version corrigée. Toutes les modifications apportées au fichier source pendant qu'\cmd{Excalibur} corrige encore le document \emph{seront perdues}, donc ne faites pas cela !

D'autres dictionnaires pour \cmd{Excalibur} sont disponibles sur <\url{http://excalibur.sourceforge.net}>.


\paragraph{\cmd{cocoAspell}}

%The \cmd{cocoAspell} integrates itself into the Apple Spell Check system. After enabling it and choosing the active dictionaries from the installed \cmd{Spelling} Preference Pane in \cmd{System Preferences} you can choose one to use within \TS\ by using \mnu{Edit}\To\mnu{Show Spelling and Grammar} (\cmd{Cmd-:}) and choosing an \cmd{Aspell} dictionary.
%
%Information on obtaining and installing more dictionaries for \cmd{cocoAspell} is available at <\url{http://people.ict.usc.edu/~leuski/cocoaspell/}>.

Ce correcteur d'orthographe s'intègre dans le système de correction orthographique d'Apple. Après l'avoir activé et sélectionné les dictionnaires à partir du panneau de préférence \cmd{Spelling} situé dans les \cmd{Préférences Système…}, vous pouvez en choisir un dans \TS\ en utilisant \mnu{Edition}\To\mnu{Afficher l'orthographe et la grammaire} (\cmd{cmd-:}) pour choisir un dictionnaire \cmd{Aspell}.

Plus d'informations sur l'obtention et l'installation de dictionnaires supplémentaires pour \cmd{cocoAspell} sur <\url{http: //people.ict.usc.edu/~leuski/cocoaspell/}>.

%\subsubsection{``Hiding'' Index Commands}\label{sec:Index}
\subsubsection{« Estompage » des commandes d'indexation}\label{secIndex}

%Indexing commands tend to duplicate information that is part of the text and therefore interfere with the process of comprehending the text itself. It is possible to have \TS\ colorize \verb|\index| commands in a bright yellow. To do that you need to add a `\cmd{ColorIndex}' checkbox to the Source window's Toolbar. With the Source window active you can either \cmd{Right-Click} (or \cmd{Ctl-Click}) on the Toolbar, choose \mnu{Customize Toolbar\dots}, or \mnu{Window}\To\mnu{Customize Toolbar\dots}, and Drag and Drop the \cmd{ColorIndex} checkbox to a place on the Toolbar. Checking that box will make all \verb"\index{text}" commands turn a bright yellow, by default, and ``recede'' into the background; see Figure (\ref{fig:DefaultSyntax}) on page \pageref{fig:DefaultSyntax}.

Les commandes d'indexation reproduisent l'information donnée par le texte et donc interfèrent avec le processus de compréhension du texte lui-même. \TS\ peut colorer ces commandes \verb+\index+ en jaune vif. Pour ce faire, vous devez ajouter une case à cocher \cmd{ColorIndex} dans la barre d'outils de la fenêtre du source. La fenêtre du source étant active, vous pouvez par un clic droit (ou \cmd{ctrl-clic}) sur la barre d'outils choisir \mnu{Personnaliser la barre d'outils. . .} ou bien aller dans le menu \mnu{Fenêtre}\To\mnu{Personnaliser la barre d'outils. . .} pour glisser et déposer la case \cmd{ColorIndex} dans la barre d'outils. Cocher cette case teintera toutes les commandes d'indexation \verb+\index{texte}+ en jaune vif, par défaut, et les « estompera » dans le texte ; voir la \cref{figDefaultSyntax} \cpageref{figDefaultSyntax}.%%%%%%%%%<<<<<<<<

%\subsubsection{Syntax Coloring}
\subsubsection{Coloration syntaxique}

%\TS\ provides Syntax Coloring for \TeX\ documents as an aid to pick out text versus markup in source documents. To activate the Syntax Coloring make sure that \mnu{Syntax Coloring} is checked in \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Source}\To\mnu{Editor}. The default color scheme is a bright red for comments, a dark blue for commands and a dark green for ``marker'' characters (\cmd{\{}, \cmd{\}} and \cmd{\$}); see Figure~(\ref{fig:DefaultSyntax}) on page \pageref{fig:DefaultSyntax}. In addition, as noted in section (\ref{sec:Index}) above, \TS\ offers a special Syntax Coloring for \verb"\index" commands so that they ``recede'' into the background and you can more easily read the surrounding text.
%
%You may not like the default Syntax Coloring scheme. Searching for `\cmd{syntax colors}' (without the quotes) in \TS's Help Panel gives information on how to change the colors for comments, commands and ``marker'' characters. It is also possible to change the color of \verb"\index" commands from the default bright yellow to some other color. The corresponding hidden preference variables are \cmd{indexred}, \cmd{indexgreen} and \cmd{indexblue}. See Figure (\ref{fig:HSSyntax}) on page \pageref{fig:HSSyntax} for an example. (If you like those adjusted syntax colors you can download \cmd{TeXShopSyntaxColors.zip} from <\url{https://dl.dropbox.com/u/10932738/index.html}>. You can also edit those scripts to create colors you prefer.)


\TS\ fournit une coloration syntaxique pour les documents source \TeX\ afin de différentier le texte du balisage. Pour activer la coloration syntaxique assurez-vous que la case \mnu{Distinctions syntaxiques en couleurs} est cochée dans \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Document}\To\mnu{Editeur}. Les couleurs par défaut sont, un rouge vif pour les commentaires, un bleu foncé pour les commandes et un vert foncé pour les « balises » (\cmd{\{}, \cmd{\}} et \cmd{\$}); voir la \cref{figDefaultSyntax} \cpageref{figDefaultSyntax}. De plus, comme indiqué dans la \cref{secIndex}, \TS\ offre, pour les commandes \verb+\index+, une coloration syntaxique particulière qui les « estompent » afin que vous puissiez lire plus facilement le texte environnant.

Vous pouvez ne pas aimer la combinaison des couleurs syntaxiques par défaut. Pour obtenir des informations sur la façon de changer les couleurs des commentaires, des commandes et des « balises » recherchez \cmd{syntax colors} dans le menu \mnu{Aide}\To\mnu{Aide de TeXShop…}. Il est également possible de changer la couleur des commandes \verb+\index+ du jaune vif, couleur par défaut, vers une autre couleur. Les variables correspondantes des préférence cachées sont \cmd{indexred}, \cmd{indexgreen} et \cmd{indexblue}. Voir l'exemple de la \cref{figHSSyntax} \cpageref{figHSSyntax}. (Si vous aimez ce choix de couleurs syntaxique, vous pouvez télécharger \cmd{TeXShopSyntaxColors.zip} depuis <\url{https://dl.dropbox. com/u/10932738/index.html}>. Vous pouvez également modifier ces scripts pour créer vos couleurs préférées.)

%%%%%%%%%%%%%%%%%%%%%%%%%%%FIN NEW

\begin{figure}
\centering
\subfloat[][]{%
\label{figDefaultSyntax}
\framebox{\includegraphics[width=1.5in]{figs/DefaultSyntaxColors}}}%
\qquad%
\subfloat[][]{%
\label{figHSSyntax}
\framebox{\includegraphics[width=1.56in]{figs/HSSyntaxColors}}}%
%\caption[\TS\ Syntax Colors]{The Default (\ref{fig:DefaultSyntax}) and an alternate set (\ref{fig:HSSyntax}) of Syntax Colors in \TS.}
\caption[Couleurs syntaxiques de \TS]{Couleurs syntaxiques de \TS\ : par défaut \subref{figDefaultSyntax} ou avec d'autres couleurs \subref{figHSSyntax}.}
\label{fig:SyntaxColors}
\end{figure}

%
\subsection{Composition}
%\subsection{Typesetting}

Une fois que vous êtes prêt à jeter un \oe{}il sur la façon dont votre document apparaîtra vous composerez avec le moteur défini par défaut, \texttt{pdflatex}, en allant simplement dans le menu \mnu{Composition}\To\mnu{Composer} (\cmd{cmd-T}).

Vous pouvez utiliser un moteur différent de celui défini par défaut. Pour ce faire allez dans \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Composition}.

Si vous incluez beaucoup de fichiers graphiques \acr{eps} dans votre document vous pouvez le composer en utilisant \texttt{latex}\To\texttt{dvips}\To\texttt{ps2pdf} car \texttt{pdf(la)tex} ne permet pas d'inclure directement les fichiers \acr{eps}\footnote{Le programme \texttt{pdflatex} à partir de \MacTeX-2010 peut faire, au vol, cette conversion des fichiers \acr{eps}.}. La meilleure façon de le faire est d'entrer la ligne
\begin{verbatim}
%%! TEX TS-program = latex
\end{verbatim}
en tête de votre document. Alors, \TS\ composera selon le procédé \texttt{latex+distiller}, mentionné ci-dessus, quel que soit le réglage par défaut du moteur. Pour forcer \texttt{pdflatex} a composer votre fichier, remplacez \texttt{latex} par \texttt{pdflatex}.

%Once you are ready to take a look at how your document will appear you typeset it with the default engine, \texttt{pdflatex} out of the box, by simply using the \mnu{Typeset}\To\mnu{Typeset} (\cmd{Cmd-T}) command.
%
%You may wish to use a different engine as your default. You can change the default engine in \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Typesetting}.
%
%If you are including many \acr{eps} graphics files in your document you may wish to typeset using \texttt{latex}\To\texttt{dvips}\To\texttt{ps2pdf} since \texttt{pdf(la)tex} does not allow for direct inclusion of \acr{eps} files\footnote{The \texttt{pdflatex} program in \MacTeX-2010 and later will do on-the-fly conversion of \acr{eps} files.}. The easiest way to do this is to include the line
%\begin{verbatim}
%% !TEX TS-program = latex
%\end{verbatim}
%at the top of your document. Then \TS\ will use the \texttt{latex+distiller} typesetting method noted above no matter what the default engine setting. Change \texttt{latex} to \texttt{pdflatex} to force use of \texttt{pdflatex} to typeset your file.

%\subsubsection{Removing ``\cmd{Aux}'' files}
\subsubsection{Suppression des fichiers ‹\cmd{.aux}›}

%The process of typesetting produces several auxiliary files that contain information about cross references, bibliography, indexes, etc. If an error occurs during typesetting these files can be left in some unknown state and need to to be removed before attempting to typeset the document again. The \mnu{File}\To\mnu{Trash Aux Files} (\cmd{Ctl-Cmd-A}) command removes most of the files that may create problems.
%
%With \TS\ 3.22 and later there is an additional way to remove those files and then typeset the document with a single command. If you hold the \cmd{Opt} key down while clicking the \mnu{Typeset} menu the \mnu{Typeset}\To\mnu{Typeset} command becomes \mnu{Typeset}\To\mnu{Trash Aux \& Typeset} (\cmd{Opt-Cmd-T}).
%
%Search for \cmd{trash aux} in \mnu{Help}\To\mnu{TeXShop Help Panel…} for the list of all file extensions removed by the \mnu{Trash Aux Files} and \mnu{Trash Aux \& Typeset} menu commands. The \cmd{Terminal} commands used to add additional extensions to the trash list and return the list to the default list of extensions is also given in that section of \TS's Help Panel.

Le processus de composition produit plusieurs fichiers auxiliaires contenant des informations sur les références croisées, la bibliographie, l'index, etc. Si une erreur survient au cours de la composition, ces fichiers, qui peuvent rester dans un état méconnu, doivent être retirés avant de composer à nouveau le document. La commande \mnu{Fichier}\To\mnu{Fichiers .aux vers corbeille} (\cmd{ctrl-cmd-A}) supprime la plupart des fichiers qui peuvent créer des problèmes. 

À partir de \TS\ 3.22, il y a un moyen supplémentaire pour supprimer ces fichiers et composer dans la foulée le document en une seule commande. Si vous maintenez la touche \cmd{alt} enfoncée tout en cliquant sur le menu \mnu{Composition} la commande \mnu{Composition}\To\mnu{Composer} devient \mnu{Composition}\To\mnu{Fichiers .aux vers corbeille \& Composer} (\cmd{alt-cmd-T}). 

Recherchez \cmd{trash aux} dans \mnu{Aide}\To\mnu{Aide de TeXShop…} pour obtenir la liste de tous les suffixes de fichiers supprimés par les commandes \mnu{Fichiers .aux vers corbeille} et \mnu{Fichiers .aux vers corbeille \& Composer}. Les commandes du \cmd{Terminal} qui permettent d'ajouter des suffixes supplémentaires à cette liste ou de revenir à la liste des suffixes par défaut sont également données dans cette section d'aide de \TS.

%\subsubsection{Experimenting}
\subsubsection{Essai}

%Version 3.37 and later of \TS\ has an \mnu{Edit}\To\mnu{Experiment…} menu item. Clicking on that item, with a Source file open, opens a new, resizable ``Experiment'' window which allows you to enter text. When you click the \mnu{Typeset} button on that window \TS\ will use the preamble from your open Source file and typeset the text in the Experiment window, opening a special Preview window to show the result. Great for experimenting with a figure to get it just right, etc.

Depuis la version 3.37 \TS\ possède un menu \mnu{Édition}\To\mnu {Expérimenter…}. En cliquant sur celui-ci, avec un fichier source ouvert, une nouvelle fenêtre d'essai ajustable s'ouvre, qui vous permet de saisir du texte. Si vous cliquez sur le bouton \mnu{Composer} de cette fenêtre, \TS\ utilisera le préambule de votre fichier source ouvert, composera le texte dans la fenêtre d'essai et ouvrira une fenêtre d'aperçu dédiée affichant le résultat. Parfait, pour essayer une figure et l'obtenir juste comme il faut, etc.

\subsection{Affichage du fichier \acr{pdf}}
%\subsection{Viewing the Output \acr{pdf} File}

Si le document a été composé correctement, le fichier \acr{pdf} s'ouvre automatiquement dans une fenêtre d'aperçu distincte.

Vous pouvez contrôler la façon dont il est affiché dans le menu \mnu{Page} et modifier les paramètres par défaut dans \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Aperçu du PDF}.

%Assuming the document was successfully typeset the \acr{pdf} file will automatically open in a separate preview window.
%
%You can control how it's displayed in the \mnu{Preview} Menu. You can change the default settings in \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Preview}.

\subsubsection{Synchronisation entre le \acr{pdf} et le source}
%\subsubsection{Synchronizing between \acr{pdf} and Source}

Avec les distributions \TeX\ les plus récentes, vous pouvez également aller d'un emplacement dans la fenêtre de l'aperçu à l'emplacement correspondant dans la fenêtre du source, et inversement, par la combinaison \cmd{cmd-clic}. Voir la \vref{SourcePreviewSync} pour un exemple de synchronisation source\To aperçu et aperçu\To source.


%With more recent \TeX\ distributions you can also skip back and forth between a location in the Preview Window and the equivalent location in the Source Window by \cmd{Cmd-Clicking} in either one to go to the (approximate) location in the other. See Figure (\ref{fig:SourcePreviewSync}) for an example of Source\To Preview and Preview\To Source synchronization.

%\begin{figure}
%\centering
%\framebox{\includegraphics[width=.475\textwidth]{figs/SourceToPreviewSync}}\qquad\framebox{\includegraphics[width=.475\textwidth]{figs/PreviewToSourceSync}}
%\caption{Synchronisation source\To aperçu et aperçu\To source.\label{fig:SourcePreviewSync}}
%\end{figure}
\begin{figure}
\centering
\subfloat[][]{%
\label{SourceToPreview}
\framebox{\includegraphics[width=7.7cm]{figs/SourceToPreviewSync}}}%
\hfill%
\subfloat[][]{%
\label{PreviewToSource}
\framebox{\includegraphics[width=7.7cm]{figs/PreviewToSourceSync}}}%
\caption[Source/Preview Synch.]{
\subref{SourceToPreview} Synchronisation source\To aperçu ; et
\subref{PreviewToSource} aperçu\To source.}
\label{SourcePreviewSync}
\end{figure}

\subsection{Travail sur un document volumineux}
%\subsection{Working with a Large Document}

Il est souvent utile de diviser un document de grande taille en plusieurs parties subalternes plus faciles à gérer, puis de créer un fichier « principal » \emph{(root)} qui contient le préambule et des commandes \verb|\include| pour assembler toutes les parties lors de la composition.

Pour que \TS\ « sache » quel fichier il doit composer lorsque vous travaillez sur un fichier secondaire entrez la ligne \begin{verbatim}
% !TEX root = path/to/rootfile.tex
\end{verbatim}
en tête de votre fichier secondaire ; \path{path/to/rootfile.tex} est le chemin relatif ou absolu vers le fichier principal de ce document. Ainsi, \TS\ composera le fichier principal si vous appuyez sur \mnu{Composition}\To\mnu{Composer} (\cmd{cmd-T}) même si vous modifiez un fichier subalterne dont le source est correctement synchronisé avec le \acr{pdf}. Ainsi, si le fichier principal est appelé \path{mongrandlivre.tex} et que les fichiers de chapitre, \path{chapter1.tex}, etc., sont dans un sous-dossier \path{chapitres} d'un niveau inférieur au fichier principal, placez la ligne
\begin{verbatim}
% !TEX root = ../mongrandlivre.tex
\end{verbatim}
en tête de chacun des fichiers de chapitre. Le \path{../} signifie qu'il faut rechercher le fichier principal dans le dossier de niveau supérieur.

%It is often handy to break a large document into more manageable subordinate parts and then create a ``root'' file which contains the preamble and \verb|\include| commands to bring all the parts together for typesetting.
%
%To have \TS\ ``know'' which file to typeset when working on a subordinate file put the line
%\begin{verbatim}
%% !TEX root = path/to/rootfile.tex
%\end{verbatim}
%at the top of your subordinate file; \path{path/to/rootfile.tex} is the relative or absolute path to the root file for this document. Once this is done \TS\ will typeset the root file if you press \mnu{Typeset}\To\mnu{Typeset} (\cmd{Cmd-T}) even though you are editing a subordinate file and properly synchronize between the Source and \acr{pdf}. E.g., if the root file is called \path{mygreatbook.tex} and the chapter files, \path{chapter1.tex}, etc., are in a \path{chapters} sub-folder below the root file then place the line
%\begin{verbatim}
%% !TEX root = ../mygreatbook.tex
%\end{verbatim}
%at the top of each of the chapter files. The \path{../} means go up one folder level to find the root file.

\subsubsection{Navigation entre fenêtres de source}
%\subsubsection{Switching between Source Windows}

Si vous avez plusieurs fichiers source ouverts, pour naviguer entre ces fichiers il vous suffit d'utiliser les commandes du menu \mnu{Fenêtre}\To\mnu{Fenêtre source suivante/précédente} (\cmd{cmd-F2}/\cmd{maj-cmd-F2}).

%If you have multiple source files open you can switch between just those files by using the \mnu{Window}\To\mnu{Next/Previous Source Window} (\cmd{Cmd-F2}/\cmd{Shft-Cmd-F2}) menu commands.

\subsection{Citations avec \cmd{BibDesk}}
%\subsection{Working with \cmd{BibDesk} and Citations}

\TS\ est doté d'une « connexion » \emph{(plugin)} qui interagit avec l'application bibliographique \cmd{BibDesk} pour vous permettre de compléter les références citées dans la commande \verb|\cite|. Pour autoriser l'utilisation de cette connexion assurez-vous que l'option \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Document}\To\ \mnu{Éditeur}\To\mnu{Complétions de BibDesk} soit cochée.

Pour l'utiliser vous devez d'abord ouvrir les fichiers bibliographiques nécessaires (\texttt{bib}) dans \cmd{BibDesk}. Entrez plusieurs caractères de la clé de référence dans la commande \verb|\cite| et appuyez sur \cmd{F5} pour obtenir la liste des références correspondantes à partir du ou des fichier(s) \texttt{bib} avec un peu d'informations sur chacune d'elles. Faites défiler jusqu'à celle que vous voulez et appuyez sur la touche \cmd{entrée} ou \cmd{tab}. La \vref{bibdesk} montre un exemple.

%\TS\ has a built-in ``plugin'' that interacts with the \cmd{BibDesk} bibliography application to allow you to complete citation references in the \verb|\cite| command.  To enable the use of the ``plugin'' make sure that \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Source}\To\mnu{Editor}\To\mnu{BibDesk Completions} is checked. 
%
%To use it you must first open the required bibliography (\texttt{bib}) file(s) in \cmd{BibDesk}. Enter several characters from the reference label within the \verb|\cite| command and press \cmd{F5} to get a list of matching references from the \texttt{bib} file(s) with a bit of information about each one. Scroll to the one you want and press \cmd{Return} or \cmd{Tab}. See Figure (\ref{fig:bibdesk}) on page (\pageref{fig:bibdesk}) for an example.
%\begin{figure}
%\centering
%\fbox{\includegraphics[width=2.7in]{figs/BibDeskPlugin}}\qquad\fbox{\includegraphics[height=1.2in]{figs/BibDeskPluginXref}}
%\caption{Exemples de connexion à \textsf{BibDesk} pour des citations et des références croisées dans \TS.\label{fig:bibdesk}}
%\end{figure}
\begin{figure}
\centering
\subfloat[][]{%
\label{BibDeskBib}
\fbox{\includegraphics[height=3.53cm]{figs/BibDeskPlugin}}}%
\hfill%
\subfloat[][]{%
\label{BibDeskXref}
\fbox{\includegraphics[height=3.53cm]{figs/BibDeskPluginXref}}}%
\caption[BibDesk Plugin Use.]{
Connexion à \textsf{BibDesk} : \subref{BibDeskBib} insertion d'une citation ; et
\subref{PreviewToSource} insertion de références croisées.}
\label{bibdesk}
\end{figure}

Cette connexion fonctionne également pour la saisie des références croisées dans les commandes \verb|\ref| ou \verb|\pageref|, mais seulement pour celles qui sont étiquetées dans le fichier que vous éditez.

%The ``plugin'' also works for entering cross-references within \verb|\ref| or \verb|\pageref| commands but only for those with labels in the file you are editing.

\subsection{Aide pour les extensions}
%\subsection{Getting Help for Packages}

Il est souvent utile d'afficher l'aide d'une extension. \TS\ dispose d'une interface avec \texttt{texdoc} qui fera apparaître cette documentation. Cliquez sur \mnu{Aide}\To\mnu{Afficher l'aide pour le package…} (\cmd{alt-cmd-I}) et entrez le nom de l'extension.

Vous pouvez, tout aussi aisément, regarder la documentation d'une extension avec la commande \mnu{Aide}\To\mnu{Ouvrir le fichier style…} et entrer le nom complet du fichier \emph{avec le bon suffixe} (p.~ex., \texttt{.sty} pour les styles ou \texttt{.cls} pour les classes).

%There are many times when having help about a given package can be handy. \TS\ has an interface to \texttt{texdoc} which will bring up that documentation. Execute the \mnu{Help}\To\mnu{Show Help for Package…} (\cmd{Opt-Cmd-I}) and enter the name of the package.
%
%You can also easily look at a package directly with the \mnu{Help}\To\mnu{Open Style File…} command and enter the full package file name \emph{including the proper extension} (e.g., \texttt{.sty} for packages or \texttt{.cls} for document classes).

% Keyboard Shortcuts
%	For Menu Items via System Preferences->Keyboard & Mouse->Keyboard Shortcuts
%	For built-in frameworks via ~/Library/KeyBindings/DefaultKeyBinding.dict
%	Via editing MainMenu.nib

\section{Maîtrise du clavier}
%\section{Controlling the Keyboard}

Un des meilleurs moyens d'accélérer l'entrée de votre texte dans un fichier source est de garder, le plus possible, les mains sur le clavier --- c'est une des raisons pour laquelle je n'aime pas l'interface « cliquable » des palettes LaTeX et Matrix. De nombreux raccourcis sont associés au système de menu de \TS\ mais cette section traite de la façon de les modifier, d'en ajouter d'autres, et de configurer son clavier.

%One of the best ways to speed up your entry of text in a source file is to keep your hands on the keyboard as much as possible---only one of the reasons I don't like the ``clicky'' interface of the \LaTeX\ and Matrix Panels. There are many shortcuts associated with the \TS\ menu system but this section is about changing and adding others and other keyboard customizations.

\subsection{Raccourcis de menu et Préférences Système}
%\subsection{Menu Shortcuts \& System Preferences}

Vous souhaiterez, peut-être, créer un raccourci pour un élément de menu qui n'en a pas ou en ajouter un pour une commande dont vous n'aimez pas le raccourci. À partir de Mac~OS~X 10.4 (Tiger) il existe une méthode pour ajouter des raccourcis vers des éléments de menu spécifiques à la fois au niveau global et dans des programmes spécifiques. Cette fonction est devenue beaucoup plus fiable dans OS~X~10.5 et surtout à partir de OS~X~10.6.

Par exemple, à partir de Mac OS~X~10.6 (Snow Leopard), \TS\ 2.36 a ajouté la commande \mnu{Fichier}\To\mnu{Nouveau depuis la papeterie…} sans un raccourci, qui serait pourtant très utile si vous avez configuré la « papeterie » à votre guise. Pour ajouter \cmd{alt-cmd-N} comme raccourci pour cet élément de menu : ouvrez l'application \textsf{Préférences Système…} puis \mnu{Clavier}\To\mnu{Raccourcis clavier} (ou \mnu{Raccourcis}) et sélectionnez \mnu{Raccourcis  d'applications} (ou \mnu{App Shortcuts}) ; appuyez sur \mnu{+} pour ajouter un raccourci ; sélectionnez \TS\ comme application ; entrez le titre exact du menu [\mnu{Nouveau depuis la papeterie…} --- notez que vous \emph{devez} entrer le caractère véritable des points de suspension, «…», (\cmd{alt-.} avec un clavier français)] ; et appuyez sur \cmd{alt-cmd-N} pour l'ajouter comme raccourci.

%Sometimes you'd like to add a shortcut to a menu item that doesn't have one or add one to a command whose shortcut you dislike. Mac~OS~X 10.4 (Tiger) and later have a method to add shortcuts to specific menu items both globally and in specific programs. This feature has become much more reliable in OS~X~10.5 and especially in OS~X~10.6 and later.
%
%One example using Mac~OS~X~10.6 (Snow Leopard) or later: \TS\ 2.36 has added a \mnu{File}\To\mnu{New from Stationery…} command, without a shortcut, which can be very helpful once you set up stationery the way you want. To add \cmd{Opt-Cmd-N} as the shortcut to that menu item: open up the \textsf{System Preferences} application to \mnu{Keyboard}\To\mnu{Keyboard Shortcuts} and select \mnu{Application Shortcuts}; press the \mnu{+} button to add a shortcut; select \TS\ as the application; enter the exact menu title [\mnu{New from Stationery…} --- note you \emph{must} enter a real ellipsis, `…', (\cmd{Opt-;} with the English keyboard layout)]; and press \cmd{Opt-Cmd-N} as the shortcut.

\subsection{Supplément d'aide à l'édition}
%\subsection{More Editing Help}

\TS\ est construit en utilisant les interfaces des programmeurs d'Apple (appelées \emph{frameworks}) et hérite donc de toutes les propriétés et fonctionnalités de ces interfaces. Beaucoup de choses disponibles dans le \emph{Text framework} ne sont pas reliées au clavier par défaut, comme de nombreuses commandes clavier « de type \cmd{emacs} », mais Apple a permis d'ajouter ces commandes à toutes les applications qui utilisent le \emph{Text framework} ; comme \textsf{TextEdit} et \textsf{Mail}, mais aussi \TS.

Ceci se fait en créant un fichier spécial, \path{DefaultKeyBinding.dict}, et en le plaçant dans un endroit particulier, \path{~/Library/KeyBindings} (vous aurez à créer le dossier \path{KeyBindings} à cet endroit s'il n'existe pas déjà).

Vous obtiendrez de plus amples renseignements à ce sujet, ainsi qu'un exemple (utile), en téléchargeant le fichier \textsf{KeyBindings.zip} depuis <\url{https://dl.dropbox.com/u/10932738/index.html}>.

%\TS\ is built using Apple's programmers interfaces (called frameworks) and therefore inherits all the properties and functionality of those interfaces. There are many things available through the Text framework that aren't tied to the keyboard by default, e.g., many `\cmd{emacs}-like' keyboard commands, but Apple has made it possible to add those commands to all applications that use the Text framework; e.g., \textsf{TextEdit} and \textsf{Mail} as well as \TS.
%
%This is done by creating a special file, \path{DefaultKeyBinding.dict}, and placing it in a particular location, \path{~/Library/KeyBindings} (you may have to create the \path{KeyBindings} folder there if it doesn't already exist).
%
%You can get more information about this, as well as a (useful) sample, by downloading the \texsf{KeyBindings.zip} file at <\url{http://dl.dropbox.com/u/10932738/index.html}>.

%\subsection{What is Broken}

% Key Bindings (auto-completion)
%	via ~/Library/TeXShop/Keyboard/autocompletion.plist

\subsection{Raccourcis clavier}
%\subsection{Key Bindings}

Outre l'ajout de raccourcis pour des éléments de menu, vous pouvez, dans \TS{}, réellement associer une combinaison de touches à la production d'un ensemble de caractères. Pour activer cette fonction, cochez l'option dans  \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Document}\To\mnu{Éditeur} \To\mnu{Raccourcis clavier}. Vous pouvez également activer ou désactiver cette fonction, pour un document particulier, en utilisant \mnu{Source}\To\mnu{Raccourcis clavier}\To\mnu{Activer/Désactiver}. Cette fonction, auparavant appelée Auto complétion, ne doit pas être confondue avec le complètement de commande --- voir la \cref{secCC}, ci-dessous.

%Besides adding shortcuts to Menu Items you can actually bind keystrokes, within \TS, to expand into groups of characters. Checking the \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Source}\To\mnu{Editor}\To\mnu{Key Bindings} option will enable this feature. You can also toggle it on/off for any particular document using \mnu{Source}\To\mnu{Key Bindings}\To\mnu{Toggle On/Off}. This feature was previously called Auto Completion; not to be confused with Command Completion---see section (\ref{sec:CC}) below.

Ainsi, avec un clavier américain, le raccourci \cmd{alt-,} entre généralement \texttt{\(\leq\)} dans votre document, mais si les raccourcis clavier sont activés, il entrera \verb|\leq|\footnote{Avec un clavier français, il faut entrer \cmd{alt-<}.}. De même, si vous sélectionnez du texte, en appuyant sur \verb|"| il sera entouré par \verb|``| et \verb|''|. 

%E.g., pressing \cmd{Opt-,} with a US keyboard layout, usually enters \texttt{\(\leq\)} into your document but with Key Binding enabled \verb|\leq| will be entered. Similarly, with some text selected pressing \verb|"| will surround the selected text with \verb|``| and \verb|''|.

Vous pouvez ajouter, supprimer ou changer les raccourcis clavier en utilisant l'éditeur (\mnu{Source}\To\ \mnu{Raccourcis clavier}\To\mnu{Éditer le fichier des raccourcis…}). Les \vref{keybindingmenu,keybindeditor} présentent le menu et l'éditeur de \mnu{Raccourcis clavier}. 

Dans l'éditeur, la colonne de gauche affiche la touche d'entrée tandis que la colonne de droite montre ce qui sera substitué à celle-ci. Pour voir comment produire certaines de ces frappes activez le visualiseur de clavier dans \mnu{Préférences Système…}\To\mnu{Clavier}\To\mnu{Clavier} en cochant la case « \mnu{Afficher le visualiseur clavier et de caractères dans la barre des menus} » puis en cliquant sur l'icône du clavier dans votre nouvelle barre de menus.

%You can add, remove or change the key bindings using the Key Bindings Editor (\mnu{Source}\To\mnu{Key Bindings}\To\mnu{Edit Key Bindings File…}). Figures (\ref{fig:keybindingmenu}) and (\ref{fig:keybindeditor}) show the \mnu{Key Bindings} Menu and Editor. Once in the Editor the left hand column displays the input keystroke while the right hand column shows what will be substituted for that keystroke. To see how you produce some of those keystrokes enable the Keyboard Viewer in \mnu{System Préférences}\To\mnu{Keyboard}\To\mnu{Keyboard} by checking the `\mnu{Show Keyboard \& Character Viewers in menu bar}' item and then clicking on the new keyboard icon in your Menu Bar.


\begin{figure}
\begin{floatrow}
\ffigbox[\FBwidth]
{\includegraphics[width=8.4cm]{figs/menuraccourcis}}{\caption{Menu Raccourcis clavier.}\label{keybindingmenu}}%
\ffigbox[\FBwidth]
{\includegraphics[width=7cm]{figs/editeurraccourcis}}{\caption{Éditeur de raccourcis clavier.}\label{keybindeditor}}
\end{floatrow}
\end{figure}

%\begin{figure}
%\begin{floatrow}
%\ffigbox[\FBwidth]
%{\includegraphics[width=8.3cm]{\includegraphics[width=7cm]{figs/editeurraccourcis}}{\caption{Éditeur de raccourcis clavier.\label{keybindeditor}}
%\ffigbox[\FBwidth]
%{\includegraphics[width=7cm]{\includegraphics[width=7cm]{figs/editeurraccourcis}}{\caption{Éditeur de raccourcis clavier.\label{keybindeditor}}
%\end{floatrow}
%\end{figure}

%\begin{figure}
%\centering
%\fbox{\includegraphics[width=3in]{figs/menuraccourcis}}
%\caption{Menu Raccourcis clavier dans \TS.\label{fig:keybindingmenu}}
%\end{figure}
%\begin{figure}
%\centering
%\includegraphics[height=3in]{figs/editeurraccourcis}
%\caption{Éditeur de raccourcis clavier dans \TS.\label{fig:keybindeditor}}
%\end{figure}


%You can add your own keybindings and/or remove those you don't need by editing \path{~/Library/TeXShop/Keyboard/autocompletion.plist}. To add a keybinding to the \verb|_| key so that pressing it with a selection will produce the selection surrounded by \verb|_{| and \verb|}| enter the lines
%\begin{verbatim}
%	<key>_</key>
%	<string>_{#SEL##INS#}</string>
%\end{verbatim}
%to the list in \path{autocompetion.plist}.

% Macros
%	Applescript and Text macros and the Macros Menu

\section{Macros}
%\section{Macros}

Les macros peuvent être de simples substitutions de texte ou des programmes Applescript qui peuvent faire toutes sortes de traitements sur un fichier. Vous pouvez aussi assigner un raccourci clavier à une macro pour l'exécuter automatiquement. Celles qui font partie de \TS\ se trouvent dans le menu \mnu{Macros}.

Vous pouvez supprimer ou ajouter des macros supplémentaires à ce menu à l'aide du \mnu{Macro Editor} (utilisez la commande \mnu{Macros}\To\mnu{Ouvrir l'éditeur des macros…}). La fenêtre du \mnu{Macro Editor} et les éléments supplémentaires dans le menu \mnu{Macros} sont respectivement présentés dans les \vref{MacroEditorWindow,MacrosMenu}.

Outre l'écriture de vos propres macros, vous pouvez ajouter des macros fournies par des tiers dans le menu \mnu{Macros} de deux façons : soit copier et coller la version texte de la macro dans un \mnu{Nouvel item} du \mnu{Macro Editor}, soit obtenir la macro en tant que fichier \texttt{plist} et l'utiliser avec la commande \mnu{Ajouter une macro à partir du fichier…} trouvée dans le menu \mnu{Macros} lorsque le \mnu{Macro Editor} est ouvert (voir à nouveau la \cref{MacrosMenu}).


%Macros can be simple text substitutions or Applescript programs that can do all sorts of processing on a file. You can also assign a keyboard shortcut to any macro for direct execution. The ones that are part of \TS\ are found under the \mnu{Macros} Menu.
%
%You can remove or add additional macros to the menu by using the \mnu{Macro Editor} (use the \mnu{Macros}\To\mnu{Open Macro Editor} command). The \mnu{Macro Editor} window and extra menu items in the \mnu{Macros} Menu are shown in Figures (\ref{fig:MacroEditorWindow}) and (\ref{fig:MacrosMenu}) respectively.
%\begin{figure}
%%\centering
%\includegraphics[width=4.75in]{figs/editeurmacros}
%\caption{Fenêtre de l'éditeur de macros.}
%\label{MacroEditorWindow}
%\end{figure}
%
%Besides writing your own macros you can add macros supplied by others to the \mnu{Macros} menu one of two ways: copy and paste the text version of the macro into a \mnu{New Item} in the \mnu{Macro Editor}; or obtain the macro as a \texttt{plist} file and use the \mnu{Add macros from file…} command found in the \mnu{Macros} Menu when the \mnu{Macro Editor} is open (again, see Figure (\ref{fig:MacrosMenu})).

\begin{figure}
\begin{floatrow}
\ffigbox[\FBwidth]
{\includegraphics[width=8.4cm]{figs/editeurmacros}}{\caption{Fenêtre de l'éditeur de macros.}\label{MacroEditorWindow}}%
\ffigbox[\FBwidth]
{\includegraphics[width=7cm]{figs/extra}}{\caption{Éléments de menu supplémentaires lorsque l'éditeur de macros est ouvert.}\label{MacrosMenu}}
\end{floatrow}
\end{figure}


%\begin{figure}
%\centering
%\framebox{\includegraphics[width=2.25in]{figs/extra}}
%\caption{Éléments de menu supplémentaires lorsque l'éditeur de macros est ouvert.\label{MacrosMenu}}
%\end{figure}
%\begin{figure}
%\centering
%\framebox{\includegraphics[width=2.5in]{figs/MacrosMenu}}
%\caption{The extra menu items when the Macro Editor is open.}
%\label{fig:MacrosMenu}
%\end{figure}

Pour plus d'informations recherchez \cmd{macros} dans le menu \mnu{Aide}\To\mnu{Aide de TeXShop…}

%More information on macros can be found by searching for \cmd{macros} in \mnu{Help}\To\mnu{TeXShop Help Panel…}.

\subsection{Macros de texte}
%\subsection{Text Macros}

Les macros de texte sont de simples substitutions de texte. Vous pouvez aussi dire à \TS\ d'insérer n'importe quel texte sélectionné en utilisant \verb|#SEL#|, de placer le curseur à l'aide \verb|#INS#| et même de mettre la macro elle même sur plusieurs lignes. Ensuite, vous pouvez affecter la macro de texte à un raccourci clavier.

J'aime utiliser \cmd{cmd-B} et \cmd{cmd-I} pour insérer \verb|\textbf{…}| et \verb|\emph{…}| dans le document où \texttt {...} est n'importe quel texte sélectionné. Les macros pour faire cela sont déjà dans le menu \mnu{Macros}\To\mnu{Text Styles} ; donc, il ne nous reste plus qu'à leur attribuer des raccourcis clavier. Pour attribuer \cmd{cmd-I} à la macro \mnu{emphasize} : ouvrir le \mnu{Macro Editor} où le nom des macros apparaît dans le volet de gauche, cliquez sur la macro \mnu{emphasize} qui se trouve sous \mnu{Text Styles} ; cliquez sur la case d'insertion de la clé (\mnu{Touche :}) où il suffit d'insérer un « \texttt{i} » minuscule (la touche \cmd{cmd} est toujours prise en charge et des touches de modification supplémentaires peuvent être cochées).

%Text macros are simple text substitutions. You can also tell \TS\ to insert any selected text using \verb|#SEL#|, place the cursor using \verb|#INS#| and even put in multiple lines in the macro itself. Then you can assign the text macro to a keyboard shortcut.
%
%I like to use \cmd{Cmd-B} and \cmd{Cmd-I} to insert \verb|\textbf{…}| and \verb|\emph{…}| into the document where \texttt{…} is any possible selected text. Macros to do that are already under the \mnu{Macros}\To\mnu{Text Styles} Menu so we need only assign keyboard shortcuts to them. To assign \cmd{Cmd-I} to the \mnu{emphasize} macro: open the \mnu{Macro Editor} where the form of the \mnu{Macros} menu appears in the left hand pane; click the \mnu{emphasize} macro found under \mnu{Text Styles}; click the Key insertion box and simply insert a lower case `\texttt{i}' (the \cmd{Cmd} key is assumed and additional modifier keys can be checked off).

\subsection{Macros Applescript}
%\subsection{Applescript Macros}

Dans le menu \mnu{Macros}, il n'est pas possible de distinguer les macros Applescript des macros de texte, pourtant elles peuvent faire des traitements compliqués et ajouter ou modifier le fichier source dans \TS{}. Ainsi, la macro \mnu{Program}, définie par défaut, crée la ligne suivante
\begin{verbatim}
%! TEX TS-program = xxxx
\end{verbatim}
en tête d'un fichier avec le moteur de votre choix à la place de \texttt{xxxx}. Vous pouvez voir le code Applescript de cette macro en cliquant sur son nom dans l'éditeur de macros (\mnu{Macro Editor}). 

%You cannot distinguish Applescript macros in the \mnu{Macros} Menu from text macros but they can do complicated processing and add/change the source file in \TS. One example in the default set is the \mnu{Program} macro that creates a
%\begin{verbatim}
%% !TEX TS-program = xxxx
%\end{verbatim}
%line at the top of a file with your choice of engine substituted for \texttt{xxxx}. You can look at the Applescript code for this macro by clicking on its name in the \mnu{Macro Editor}.

%\begin{figure}[h]
%\centering
%\framebox{\includegraphics[width=2.25in]{figs/extra}}
%\caption{Éléments de menu supplémentaires lorsque l'éditeur de macros est ouvert.\label{fig:MacrosMenu}}
%\end{figure}

% Command Completion
%	via ~/Library/TeXShop/CommandCompletion.txt & Macros

\section{Complètement de commande}\label{secCC}
%\section{Command Completion}\label{sec:CC}

Le balisage de \LaTeX\ est plutôt prolixe, ce qui est agréable, car il décrit ce qu'il est censé faire, mais un peu pénible à écrire. Le complètement de commande vous permet d'insérer des environnements complets et des commandes en quelques frappes suivies d'une ou plusieurs pressions  sur la touche de déclenchement (qui est, par défaut, \cmd{esc} mais peut être remplacée par \cmd{tab} en allant dans \mnu{TeXShop}\To\mnu{Préférences…}\To\mnu{Document}\To\mnu{Commande de complétion déclenchée par}).

Les commandes avec arguments ont généralement un repère (\texttt{•}) placé à leur niveau. Pour aller à l'argument suivant, utilisez la commande \mnu{Source}\To\mnu{Commande de complètement}\To\mnu{Repères} \To\mnu{Repère suivant} (\cmd{ctrl-cmd-F} [ou \cmd{alt-esc/tab}]). Ceci sélectionne en même temps le repère pour qu'il soit automatiquement remplacé par l'information saisie. Voir la documentation complète, avec les listes de commandes et abréviations, fournie avec \TS\ dans le dossier \path{~/Library/TeXShop/CommandCompletion}, pour plus d'informations.

%\LaTeX\ markup is rather wordy which is nice because it describes what it's supposed to do but a bit painful to write. Command Completion allows you to insert complete environments and commands with a few keystrokes and the press of a ``trigger'' key (this is \cmd{Esc} by default but can be changed to \cmd{Tab} in \mnu{TeXShop}\To\mnu{Preferences}\To\mnu{Source}\To\mnu{Command Completion Triggered By:}).

%Commands that have arguments usually have a Mark (\texttt{•}) inserted for each argument. You move to the next argument by using the \mnu{Source}\To\mnu{Command Completion}\To\mnu{Marks}\To\mnu{Next Mark} command (\cmd{Ctl-Cmd-F} [or \cmd{Opt-Trigger}]). This also selects the Mark so typing automatically removes the Mark and substitutes the typed information. See the complete documentation, with lists of commands/abbreviations supplied with \TS\ out of the box, in the \path{~/Library/TeXShop/CommandCompletion/} folder for much more information.

\subsection{Complètements}
%\subsection{Completions}

Vous pouvez compléter de nombreuses commandes en commençant à les saisir puis en appuyant sur la touche de déclenchement. Les commandes qui diffèrent par leur nombre d'arguments optionnels sont générées par des pressions successives sur la touche de déclenchement. Ainsi, taper \verb|\sec| puis la touche de déclenchement produit sur une nouvelle ligne

%You can complete many commands by starting to type them and pressing the trigger key. Variations on the commands with differing numbers of optional arguments are generated by additional presses of the trigger. One example: typing \verb|\sec| and then the trigger on a new line produces
\begin{verbatim}
\section{|selmark}
\end{verbatim}
tandis qu'une seconde pression sur la touche de déclenchement donne
%while a second press of the trigger gives
\begin{verbatim}
\section*{|selmark}
\end{verbatim}
la variante étoilée * et qu'une dernière pression sur cette touche donne la commande
%the *-variant of the command and a final press of the trigger gives
\begin{verbatim}
\section[|selmark]{•}
\end{verbatim}
avec l'argument optionnel.
%with the optional argument.

\subsection{Substitutions ou abréviations}
%\subsection{Substitutions or Abbreviations}

Outre le complètement des commandes entrées partiellement, il y a aussi de nombreuses abréviations. Celles-ci sont de courts mnémoniques pour accéder à des substitutions complètes.

Toutes les abréviations pour les environnements commencent par un « \texttt{b} ». Pour obtenir l'environnement  \cmd{itemize} complet, entrez \verb|\bite| sur une nouvelle ligne et appuyez sur la touche de déclenchement ce qui produira

%Besides completions for partial command insertions there are also many abbreviations. These are short mnemonics for complete substitutions. 
%
%All abbreviations for environments start with a `\texttt{b}'. To generate a complete \cmd{itemize} environment place \verb|\bite| on a line by itself and press the trigger key to get
\begin{verbatim}
\begin{itemize}
\item
|selmark
\end{itemize}•
\end{verbatim}
terminé par un repère pour que vous puissiez facilement accéder à la fin de l'environnement. Des items supplémentaires peuvent être créés en tapant \verb|\it| puis la touche de déclenchement afin d'obtenir
%with an extra Mark at the end so you can easily jump to the end of the environment. Additional items can be generated by typing \verb|\it| and the trigger to get
\begin{verbatim}
\item
|selmark
\end{verbatim}
prêt pour l'entrée d'un texte.
%ready for entry of text.

En outre, les commandes de sous-sectionnement possèdent leurs abréviations. Elles peuvent être obtenues en tapant  \verb|\ssec| puis en pressant la touche de déclenchement ce qui donnera

%In addition to the \verb|\section| command lower level sectioning commands have abbreviations. Sub-sections can be generated by typing \verb|\ssec| and the trigger to get
\begin{verbatim}
\subsection{|selmark}
\end{verbatim}
des pressions successives sur la touche de déclenchement donneront, la variante étoilée * et, enfin, la variante avec l'argument optionnel.
%with subsequent presses of the trigger key giving the *-variant and finally the variant with the optional argument.

En dernier exemple, l'entrée de \verb|\tt| suivi d'une pression sur la touche de déclenchement donnera la commande \verb|\texttt{|\selmark\verb|}| ; une seconde pression de cette touche donnera la déclaration \verb|\ttfamily| : des résultats similaires sont obtenus avec les autres commandes de changement de style de police.

%As a final example \verb|\tt| and the trigger gives the \verb|\texttt{|\selmark\verb|}| command and a second press of the trigger gives the declaration \verb|\ttfamily| with similar results for other font changing commands.


%A set of tables for all the completions and abbreviations supplied with \TS\ can be found in Appendix A on page \pageref{sec:CCTables}.
Un ensemble de tableaux listant les complètements et les abréviations fournies avec \TS\ se trouve dans l'annexe A  \cpageref{secCCTables}.

\subsection{Hé ! ça ne fonctionne pas}
%\subsection{Hey, it doesn't work!}

Si ces exemples ne fonctionnent pas, vous devrez probablement permettre à \TS\ de mettre à jour le dossier \path{~/Library/TeXShop/CommandCompletion} ; supprimez purement et simplement ce dossier de \path{~/Library/TeXShop} et redémarrez \TS.

%If these examples don't work you probably need to let \TS\ update the \path{~/Library/TeXShop/CommandCompletion/} folder; simply delete that folder from \path{~/Library/TeXShop/} and restart \TS.

% Engines
%	via ~/Library/TeXShop/Engines/

\section{Extension du traitement par les moteurs}
%\section{Extending Processing via Engines}

\TS\ propose plusieurs « moteurs » par défaut (aussi appelés « scripts » : un héritage du passé) dans son menu \mnu{Composition}. Ils s'agit notamment d'exécuter, \mnu{Plain TeX} ou \mnu{LaTeX} (en utilisant \texttt{pdftex} ou \texttt{TeX+DVI}), \mnu{BibTeX},  \mnu{MakeIndex}, \mnu{MetaPost} ou \mnu{ConTeXt}. Mais, beaucoup de choses que vous souhaiteriez faire ne relèveront pas de cette offre limitée ; si bien que \TS\ vous permet également d'installer de nouveaux moteurs qui sont stockés dans \path{~/Library/TeXShop/Engines}. Ces moteurs supplémentaires n'apparaissent pas dans le menu \mnu{Composition}, mais seulement dans la liste déroulante de la barre d'outils du source (voir la \vref{EnginesPopup}).

Vous pouvez utiliser ces moteurs en les sélectionnant dans cette liste déroulante, puis en appuyant sur le bouton \mnu{Composition} ou mieux, si vous utilisez différents moteurs pour différents documents, en mettant une ligne comme

%\TS\ offers several default ``engines'' (also referred to as ``scripts'' which is left over from earlier times) in its \mnu{Typeset} Menu. These include running \mnu{Plain TeX} or \mnu{LaTeX} (either using \texttt{pdftex} or \texttt{TeX+DVI}), \mnu{BibTeX}, \mnu{MakeIndex}, \mnu{MetaPost} or \mnu{ConTeXt}. But there are many things you may wish to do that fall outside of this limited set so \TS\ also allows you to create new engines that are stored in \path{~/Library/TeXShop/Engines/}. These additional engines do not show up in the \mnu{Typeset} menu but only in the popup list on the Source and Preview Toolbar (see Figure (\ref{fig:EnginesPopup})). 
%
%You can use these engines by choosing from that popup list and then pressing the Typeset button or, a better choice if you use different engines for different documents, by putting a line like
\begin{verbatim}
% !TEX TS-program = xelatex
\end{verbatim}
en tête de votre fichier source ; dans cet exemple le moteur \texttt{xelatex} sera utilisé pour ce fichier indépendamment des autres choix.
%at the top of your source file; the example given will run the \texttt{xelatex} engine on this file independent of other choices.

D'origine, seuls quelques moteurs sont activés dans \TS\ (c.-à-d., directement dans le dossier \path{~/Library/TeXShop/Engines}), mais il y a aussi d'autres moteurs dans le dossier \path{~/Library/TeXShop/Engines/Inactive}. À titre d'exemple, nous allons activer et utiliser le moteur \cmd{pdflatexmk} trouvé dans \path{~/Library/TeXShop/Engines/Inactive/Latexmk}.

%\TS\ is shipped with a few engines activated (i.e., directly in the \path{~/Library/TeXShop/Engines/} folder) but also includes several additional ones in \path{~/Library/TeXShop/Engines/Inactive/}. As an example let's activate and use the \cmd{pdflatexmk} engine found in \path{~/Library/TeXShop/Engines/Inactive/Latexmk/}.
\begin{figure}
%\centering
\framebox{\includegraphics[width=6cm]{figs/moteurs}}
\caption{Menu déroulant des moteurs dans la barre d'outils du source.\label{EnginesPopup}}
\end{figure}

\subsection{Moteur \texttt{pdflatexmk}}
%\subsection{The \texttt{pdflatexmk} engine}

%If your document had cross-references, bibliographies or indexes it takes multiple \texttt{pdflatex} runs with intermediate runs of \texttt{bibtex} and/or \texttt{makeindex} to create the bibliographies, indexes and resolve all cross-references. The \texttt{pdflatexmk} engine automates this whole process.
%

Si votre document comportait des références croisées, des bibliographies ou des index, il faudrait plusieurs compilations avec \texttt{pdflatex}, mais aussi d'autres encore avec \texttt{bibtex} ou \texttt{makeindex}, pour créer les bibliographies, les index et résoudre toutes les références croisées. Le moteur \texttt{pdflatexmk} automatise ce processus.

%\TS\ 3.07 or 2.46 and later activate the pdflatexmk engine by default \emph{in a fresh installation}. If you are using an earlier version of \TS, or even updated to the latest version from an earlier version, you need to activate the engine. To activate the engine simply move the \texttt{pdflatexmk.engine} file from \path{~/Library/TeXShop/Engines/Inactive/Latexmk} two folders up, to \path{~/Library/TeXShop/Engines}. When you restart \TS\ you can check that \cmd{pdflatexmk} in now in the popup menu.

À partir de \TS\ 3.07 ou 2.46, le moteur pdflatexmk est activé par défaut \emph{dès la première installation}. Si vous utilisez une version antérieure de \TS, ou même si vous mettez à jour cette version antérieure pour adopter la dernière version, vous devez activer ce moteur. Pour l'activer il suffit de déplacer le fichier \texttt{pdflatexmk.engine} du répertoire \path{~/Library/TeXShop/Engines/Inactive/Latexmk} pour le mettre, deux dossiers en amont, dans \path{~/Library/TeXShop/Engines}. Au redémarrage de \TS\ vous pourrez vérifier que \cmd{pdflatexmk} figure maintenant dans le menu déroulant.

%Then place the line
Il ne reste plus qu'à entrer la ligne
\begin{verbatim}
% !TEX TS-program = pdflatexmk
\end{verbatim}
en tête de votre fichier source. Dès cet instant, il suffit de composer le fichier (\mnu{Composition}\To{} \mnu{Composer} ou \cmd{cmd-T}) pour que \TS\ utilise ce moteur et que le processus complet de mise en page du document s'effectue jusqu'à sa forme finale. 
%at the top of your source file. From then on when you simply typeset the file (\mnu{Typeset}\To\mnu{Typeset} or \cmd{Cmd-T}) \TS\ will use this engine and the complete process for typesetting the document to its final form will be carried out.

%\section*{Appendices}
%\addcontentsline{toc}{section}{Appendices}
\section*{Annexes}
\addcontentsline{toc}{section}{Annexes}
\appendix

%\section{---\quad Command Completion Tables}\label{sec:CCTables}
\section{---\quad Tableaux du complètement de commande}\label{secCCTables}
%The following tables contain the Command Completions and Abbreviations included by default with \TS. Table~\ref{tbl:environments} on page~\pageref{tbl:environments} is a list of all included environment abbreviations. Table~\ref{tbl:commands} on page~\pageref{tbl:commands} lists included abbreviations/completions for commands and declarations. Finally, Table~\ref{tbl:greek} on page~\pageref{tbl:greek} are the included abbreviations for greek letters.
%
%It is important to remember that with a given abbreviation successive presses of the trigger key go to the next match in the list. E.g., there are three sectioning commands, \cmd{sec} for the standard section command, \cmd{secs} for the ``starred'' version of the command and \cmd{seco} for the version with an optional argument; if you enter \cmd{sec} as your abbreviation successive presses of the trigger goes from the \cmd{sec} to the \cmd{secs} to the \cmd{seco} versions before returning to your original abbreviation. That means there are many abbreviations that you never need to remember.
%
%Note: do \emph{not} attempt to memorize these tables. Learn a few items that you use all the time and then slowly add to your knowledge as you need them.

Les tableaux suivants contiennent les achèvements et abréviations de commande inclus par défaut dans \TS. Le \cref{tblenvironments} \cpageref{tblenvironments} liste toutes les abréviations pour les environnements. Le \cref{tblcommands} \cpageref{tblcommands} montre les abréviations pour les commandes et les déclarations. Enfin, le \cref{tblgreek} \cpageref{tblgreek} présente les abréviations pour les lettres grecques.

Il est important de se rappeler que d'une abréviation donnée les appuis successifs sur la touche de déclenchement affichent le terme suivant de la liste. Ainsi, il y a trois commandes de sectionnement, \cmd{sec} pour la commande standard, \cmd{secs} pour la commande « étoilée » et \cmd{seco} pour la version avec un argument optionnel ; si vous entrez \cmd{sec} comme abréviation les pressions successives sur la touche de déclenchement irons de \cmd{sec} à \cmd{secs} puis à \cmd{seco} avant de retourner à l'abréviation d'origine. Cela signifie qu'il n'est pas nécessaire de se souvenir d'un grand nombre  d'abréviations.

Remarque : n'essayez pas de mémoriser ces tableaux ; ne retenez que les abréviations que vous utilisez tout le temps, puis mémorisez-en d'autres en fonction de vos besoins.

\begin{table}[H]
\small
\centering
\begin{tabular}{llll}
\textbf{Abréviation} & \textbf{Environnement} & \textbf{Abréviation} & \textbf{Environnement} \\
\cmidrule[0.5pt](lr){1-1} \cmidrule[0.5pt](lr){2-2} \cmidrule[0.5pt](lr){3-3} \cmidrule[0.5pt](lr){4-4}
barr      & array       & blett   & letter \\
babs      & abstract    & blist   & list \\
bali      & align       & bminp   & minipage \\
balis     & align*      & bminpo  & minipage \\
baliat    & alignat     & bmult   & multline \\
baliats   & alignat*    & bmults  & multline* \\
balied    & aligned     & bpict   & picture \\
baliedat  & alignedat   & bpmat   & pmatrix \\
baliedato & alignedat   & bquot   & quotation \\
bapp      & appendix    & bquo    & quote \\
bbmat     & bmatrix     & bsplit  & split \\
bcase     & cases       & bsubeq  & subequations \\
bcent     & center      & btab    & tabular \\
bcenum    & compactenum & btabs   & tabular* \\
bcenumo   & compactenum & btabx   & tabularx \\
bcitem    & compactitem & btabl   & table \\
bcitemo   & compactitem & btablo  & table \\
bdes      & description & btabls  & table* \\
benu      & enumerate   & btablso & table* \\
benuo     & enumerate   & btbl    & table \\
bequ      & equation    & btblo   & table \\
bequs     & equation*   & btbls   & table* \\
beqn      & eqnarray    & btblso  & table* \\
beqns     & eqnarray*   & btabb   & tabbing \\
bfig      & figure      & bbib    & thebibliography \\
bfigo     & figure      & bindex  & theindex \\
bframe    & frame       & btheo   & theorem \\
bframeo   & frame       & btitpg  & titlepage \\
bflalig   & flalign     & btrivl  & trivlist \\
bflaligs  & flalign*    & bvarw   & varwidth \\
bfll      & flushleft   & bverb   & verbatim \\
bflr      & flushright  & bvers   & verse \\
bgath     & gather      & bwrap   & wrapfigure \\
bgaths    & gather*     & bwrapo  & wrapfigure \\
bgathed   & gathered    & bwrapo2 & wrapfigure \\
bgathedo  & gathered    & bwrapoo & wrapfigure \\
bite      & itemize     &         & \\
biteo     & itemize     &         & \\
\end{tabular}
%\caption{Environment abbreviations.}
\caption{Abréviations pour les environnements.}
\label{tblenvironments}
\end{table}

\begin{table}[H]
\centering
\small
\makebox[\textwidth]{%
\begin{tabular}{llllll}
\textbf{Abréviation} & \textbf{Commande} & \textbf{Abréviation} & \textbf{Commande} & \textbf{Abréviation} & \textbf{Commande} \\
\cmidrule[0.5pt](lr){1-1} \cmidrule[0.5pt](lr){2-2} \cmidrule[0.5pt](lr){3-3} \cmidrule[0.5pt](lr){4-4} \cmidrule[0.5pt](lr){5-5} \cmidrule[0.5pt](lr){6-6}
\texttt{-{}-}    & textendash        & midr       & midrule        & renewcomo       & renewcommand \\
\texttt{-{}-{}-} & textemdash        & mnorm      & mathnormal     & renewcomoo      & renewcommand \\
\texttt{-{}-{}-} & textemdash w/sp   & msf        & mathsf         & rncm            & renewcommand \\
adlen            & addtolength       & mtt        & mathtt         & rnewc           & renewcommand \\
adcount          & addtocounter      & mit        & mathit         & rncmo           & renewcommand \\
bf               & textbf            & midr       & midrule        & rnewcoo         & renewcommand \\
bfd              & bfseries          & mnorm      & mathnormal     & rncmoo          & renewcommand \\
biblio           & bibliography      & mdd        & mdseries       & rmc             & rmfamily \\
bibstyle         & bibliographystyle & mbox       & mbox           & rbox            & raisebox \\
botr             & bottomrule        & makebox    & makebox        & rboxo           & raisebox \\
bibitem          & bibitem           & mboxo      & makebox        & rboxoo          & raisebox \\
bibitemo         & bibitem           & makebox    & makebox        & sec             & section \\
center           & centering         & mboxoo     & makebox        & secs            & section* \\
chap             & chapter           & mpar       & marginpar      & seco            & section \\
cmidr            & cmidrule          & multic     & multicolumn    & ssec            & subsection \\
cmidro           & cmidrule          & ncol       & space \& space & ssecs           & subsection* \\
em               & emph              & ncm        & newcommand     & sseco           & subsection \\ 
emd              & em                & newc       & newcommand     & sssec           & subsubsection \\
foot             & footnote          & ncmo       & newcommand     & sssecs          & subsubsection* \\
frac             & frac              & newco      & newcommand     & ssseco          & subsubsection \\
fbox             & fbox              & ncmoo      & newcommand     & spar            & subparagraph \\
fboxo            & framebox          & newcoo     & newcommand     & spars           & subparagraph* \\
fboxoo           & framebox          & nct        & newcolumntype  & sparo           & subparagraph \\
geometry         & geometry          & newct      & newcolumntype  & setl            & setlength \\
hw               & headwidth         & newpg      & newpage        & stcount         & stepcounter \\
hw2tw            & headw\(=\)textw   & npg        & newpage        & sf              & textsf \\
href             & href              & nline      & newline        & sfd             & sffamily \\
item             & item              & newlin     & newline        & sc              & textsc \\
ito              & item              & nlen       & newlength      & scd             & scshape \\
incg             & includegraphics   & newlen     & newlength      & sl              & textsl \\
incgo            & includegraphics   & nenv       & newenvironment & sld             & slshape \\
it               & textit            & newenv     & newenvironment & sqrt            & sqrt \\
itd              & itshape           & nenvo      & newenvironment & sqrto           & sqrt \\
latex            & LaTeX             & newenvo    & newenvironment & tt              & texttt \\
latexs           & LaTeX w/sp        & nenvoo     & newenvironment & ttd             & ttfamily \\
latexe           & LaTeXe            & newenvoo   & newenvironment & tw              & textwidth \\
latexes          & LaTeXe w/sp       & pgref      & pageref        & tex             & TeX \\
label            & label             & par        & paragraph      & texs            & TeX w/sp \\
lbl              & label             & pars       & paragraph*     & tilde           & textasciitilde \\
lettrine         & lettrine          & paro       & paragraph      & topr            & toprule \\
lettrineo        & lettrine          & pgs        & pagestyle      & toc             & tableofcontents \\
listf            & listoffigures     & parbox     & parbox         & tableofcontents & tableofcontents \\
listt            & listoftables      & parboxo    & parbox         & tpgs            & thispagestyle \\
rule             & rule              & parboxoo   & parbox         & thispagestyle   & thispagestyle \\
ruleo            & rule              & parboxooo  & parbox         & up              & textup \\
mbf              & mathbf            & pbox       & parbox         & upd             & upshape \\
mrm              & mathrm            & pboxo      & parbox         & url             & url \\
mcal             & mathcal           & pboxoo     & parbox         & usep            & usepackage \\
msf              & mathsf            & pboxooo    & parbox         & usepo           & usepackage \\
mtt              & mathtt            & ref        & ref            & verb            & verb \\ 
mit              & mathit            & renewcom   & renewcommand   & verb2           & verb \\
\end{tabular}
}
%\caption{Commands and Declarations.}
\caption{Commandes and déclarations.}
\label{tblcommands}
\end{table}

\begin{table}[H]
\small\centering
\begin{tabular}{llll}
\textbf{Abréviation} & \textbf{Commande} & \textbf{Abréviation} & \textbf{Commande} \\
\cmidrule[0.5pt](lr){1-1} \cmidrule[0.5pt](lr){2-2} \cmidrule[0.5pt](lr){3-3} \cmidrule[0.5pt](lr){4-4}
xa  & alpha      & xvp  & varpi \\
xb  & beta       & xph  & phi \\
xch & chi        & xcph & Phi \\
xd  & delta      & xvph & varphi \\
xcd & Delta      & xps  & psi \\
xe  & epsilon    & xcps & Psi \\
xve & varepsilon & xs   & sigma \\
xet & eta        & xcs  & Sigma \\
xg  & gamma      & xvs  & varsigma \\
xcg & Gamma      & xz   & zeta \\
xio & iota       & xr   & rho \\
xk  & kappa      & xvr  & varrho \\
xl  & lambda     & xt   & tau \\
xcl & Lambda     & xth  & theta \\
xm  & mu         & xcth & Theta \\
xn  & nu         & xvth & vartheta \\
xo  & omega      & xu   & upsilon \\
xco & Omega      & xcu  & Upsilon \\
xp  & pi         & xx   & xi \\
xcp & Pi         & xcx  & Xi \\
\end{tabular}
%\caption{Greek Letters. The `\texttt{d}' versions are not shown.}
\caption{Lettres grecques : la version « \texttt{d} » n'est pas reproduite ici.}
\label{tblgreek}
\end{table}

%\section{---\quad Toolbars}\label{sec:Toolbars}

%\section{---\quad Hidden Preferences}\label{sec:HiddenPrefs}






\end{document}
