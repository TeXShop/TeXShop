<HTML>

<HEAD>
			<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=Shift_JIS">
			<TITLE>隠れた環境設定項目</TITLE>
			<META NAME="copyright" CONTENT="Copyright (c) 2003 Richard Koch under the GNU FDL">
			<META NAME="description" CONTENT="タグの追加　ソースのカラー表示　ウインドウの背景色　バックアップ　プレビューの自動更新">
			<link href="../sty/screen.css" rel="stylesheet" media="all">
</HEAD>

<BODY>
<div id="content_border">

<p>
TeXShop では、\section ・ \subsection ・ \subsubsection あるいは \chapter という語で始まっている行をタグメニューに追加します。これをオフにするには、ターミナルを起動し、以下のコマンドを打ち込みます。NO を YES に変えれば、動作はまた元に戻ります。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop TagSections NO
		</dl>
	</tt>

<p>
ConTeXt ユーザーは、もっと多くの語句がタグメニューに追加されることをお望みでしょう。以下の設定をすると、\subsubsubsection, \subsubsubsubsection, \part, \title, \subject, \subsubject, \subsubsubject, \subsubsubsubject, そして \subsubsubsubsubject などの語句が認識されるようになって、タグメニューに追加されます。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop ConTeXtTags YES
		</dl>
	</tt>

<hr>

<p>
ソースウインドウで「ソースのカラー表示」がオンになっていると、コメントは赤、コマンドは青、「 $ 」 「 { 」 「 } 」といった記号は暗緑色になります。これらの色合いは変更できます。色は、赤・緑・青（Ｒ・Ｇ・Ｂ）の成分で決定されています ； 各成分は 0.0 から 1.0 までの数です。「 $ 」 「 { 」 「 } 」の色を明るい緑色に変えるには、Terminal から次のようなコマンドを送ります──
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop markerred 0.0
			<dd>defaults write TeXShop markergreen 1.0
			<dd>defaults write TeXShop markerblue 0.0
		</dl>
	</tt>

<p>
コメントの色を変更するには「marker」を「comment」に置き換えます ； コマンドの色を変えるには「marker」を「command」に置き換えます。
</p>

<hr>

<p>
ソースウインドウの背景色を変えることができます。たとえば、背景色を (r, g, b) = (.42, .39, .77) にするには、次のコマンドを Terminal から送ります：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop background_R 0.42
			<dd>defaults write TeXShop background_G 0.39
			<dd>defaults write TeXShop background_B 0.77
		</dl>
	</tt>


<p>
またソースウインドウの文字色を変えることもできます。この設定は「ソースのカラー表示」がオンになっているときにのみ有効です。前面の色を (r, g, b) = (.42, .39, .77) にするには、次のコマンドを Terminal から送ります：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop foreground_R 0.42
			<dd>defaults write TeXShop foreground_G 0.39
			<dd>defaults write TeXShop foreground_B 0.77
		</dl>
	</tt>

<p>
さらにまた、ソースウインドウ内の挿入ポイントの色を変えることもできます。たとえば、挿入ポイントの色を (r, g, b) = (.42, .39, .77) にするには、次のコマンドを Terminal から送ります：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop insertionpoint_R 0.42
			<dd>defaults write TeXShop insertionpoint_G 0.39
			<dd>defaults write TeXShop insertionpoint_B 0.77
		</dl>
	</tt>

<p>
上記３組のコマンドを組み合わせて使うことで、黒地に白い文字や、その他のお望みの色構成でソースウインドウを表示させることができます。
</p>

<hr>

<p>
プレビューウインドウの背景色も変えることができます。たとえば、背景色を (r, g, b) = (.42, .39, .77) にするには、下記のコマンドを Terminal から送ります。これらの数字をすべて１にすると、背景は白に戻ります。カラー化した TeX 文書を見るには、背景が灰色になっているほうが見やすいでしょう。背景色は印刷には影響を与えません。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop Pdfbackground_R 0.42
			<dd>defaults write TeXShop Pdfbackground_G 0.39
			<dd>defaults write TeXShop Pdfbackground_B 0.77
		</dl>
	</tt>

<hr>

<p>
ソース、プレビュー、コンソールの各ウインドウの透明度を変更することができます。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop ConsoleWindowAlpha 0.75
			<dd>defaults write TeXShop SourceWindowAlpha 0.75
			<dd>defaults write TeXShop PreviewWindowAlpha 0.75
		</dl>
	</tt>


<p>
ここでアルファ値が 0.00 なら完全に透明となり、アルファ値が 1.00 なら完全に不透明となります。これらのコマンドは用心してお使いください。
</p>

<hr>

<p>
ファイルを保存したりタイプセットしたりする際にかならずバックアップファイルを作成するよう TeXShop を設定することができます。これをオンにするには、Terminal を起動し、以下のコマンドを打ち込みます。オフにするには YES を NO に変えてください。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop KeepBackup YES
		</dl>
	</tt>

<hr>

<p>
タイプセットの際に時たま、TeX によって自動的に生成される .aux ファイルや .log ファイル、その他のファイルがおかしくなったりして、取り除かねばならないことがあります。TeXShop には「作業ファイルを削除」というメニュー項目があり、さらにコンソールウインドウにもこれと連動しているボタンがあります。このいずれかを選択すると TeXShop は、ソースファイルを含むフォルダ内にあって、ソースと同じ名前で、拡張子が aux ・ blg ・ brf ・ ccs ・ ent ・ fff ・ glo ・ idx ・ idv ・ ilg ・ ind ・ ioa ・ lg ・ log ・ lot ・ mtc ・ mlf ・ out ・ pdfsync ・ toc ・ ttt ・ wrm ・ xref ・ 4ct ・ 4tc となっているファイルをすべてゴミ箱へと移動します。このリストには、その他の拡張子を、ひとつずつ追加することができます。例として、.dvi ファイルを加えるには：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop OtherTrashExtensions -array-add "dvi"
		</dl>
	</tt>

<p>
追加した拡張子を取り除いて元々のリストに戻すには──
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop OtherTrashExtensions -array
		</dl>
	</tt>

<p>
時として、さらに徹底したクリーンナップが望ましいことがあります。オプションキーを押しながら「作業ファイルを削除」を選択すると TeXShop は、%&SourceDoc および「プロジェクトルートの設定」機能を使ってルートファイルを探し当てます。そしてルートファイルのあるフォルダ内、およびこのフォルダ内のサブフォルダの中にあり、該当する拡張子の付いたすべてのファイルを、そのファイル名の如何に関わらず、ゴミ箱に移します。「作業ファイルを削除」の動作を、オプションキーを押すことなく上述のようにすることもできます ； 次のようなコマンドを入れてください──
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop AggressiveTrashAUX YES
		</dl>
	</tt>

<hr>

<p>
pdf ファイルが変更されたときに pdf 画面を自動的に更新するよう TeXShop を設定することができます。自動更新のためにTeXShop は、１秒に１度、pdf が最後に書き変えられた日付と時刻に変更があったかどうかチェックします。このチェックの間隔は変更することができます。Terminal を立ち上げ、次のコマンドを打ち込みます。1.00 をお好みの秒数に変えてください。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop RefreshTime 1.00
		</dl>
	</tt>

<p>
pdf の自動更新は、外部エディタを使うよう設定しているか、あるいは「プレビューを開く...」で TeX ファイルを開いたときに便利です。これらの場合には、.tex ファイルは開かれていますが、TeXShop ではただ関連づけの行なわれた pdf ファイルを表示しているにすぎません。TeXShop はまた、pdf ファイルを直接開くこともできます ； これはイラストを TeX 文書に埋め込む前に一瞥しておくのに便利です。外部エディタのために開いた pdf ファイルは自動的に更新させたいけれども、一瞥するために開いた pdf ファイルは自動更新させたくない場合には、Terminal を立ち上げ、以下のコマンドを打ち込みます。この設定のデフォルトの値は YES です。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop PdfFileRefresh NO
		</dl>
	</tt>

<p>
外部エディタで .tex ファイルを開いた際に、TeXShop は TeX ファイルと pdf ファイルの日付をチェックし、pdf 出力が最新の状態になっているかどうか確認します。もし出力が古くなっているか、まったく存在しないようなら、TeXShop は .tex ファイルを改めてタイプセットします。この動作をオフにするには、Terminal を立ち上げ、以下のコマンドを打ち込みます。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop ExternalEditorTypesetAtStart NO
		</dl>
	</tt>

<hr>

<p>
行列パネルにおける行列のデフォルトのサイズを設定する隠れた環境設定があります：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop matrixsize 12
		</dl>
	</tt>

<hr>

<p>
「Sync」という名前の新しいチェックボックスが、プレビューウインドウ用ツールにあります。これはデフォルトのツール・キットの一部にはなっていません。この項目がチェックされると、シンクロ・スポットをプレビュー文書内で見ることができます。プレビューウインドウが最初に表示された際は見えませんが、これを以下のようにして変更できます：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop ShowSyncMarks YES
		</dl>
	</tt>

<hr>

<p>
タイプセット後にプレビューウインドウが更新されると、ウインドウは前面に来ます。この動作は、Apple の X11 Window Manager で実行させている X11 エディタの使用でトラブルの種になります。そうした場合には、以下のようにしてこの動作をオフにできます：
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop BringPdfFrontOnAutomaticUpdate NO
		</dl>
	</tt>

<hr>

<p>
TeXShop ではこれまで、タイプセットエンジンやファイルのエンコーディング方式、ルートファイルを決めるのに、現行のものとは異なるソースコマンドをサポートしていました； たとえば、%&latex ・ %&encoding=UTF-8 Unicode ・ %SourceDoc ../Main.tex などといったものです。この構文は私の不用意な選定によるものでしたので、変更しました。もし古いファイルがたくさんあって、一時的に以前の状態に戻すには、下記のコマンドを使用してください。そうすれば、新しいソースコマンドが認識されるだけでなく、古いソースコマンドもまた同様に機能します。この設定変更は応急の場合にのみ用いてください。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop UseOldHeadingCommands YES
		</dl>
	</tt>

<hr>

<p>
プレビューウインドウの幅がページ全体の幅よりも狭いときには、左および右のカーソルキーで左右にスクロールしますが、そうでない場合には上下にページ移動します。隠れた環境設定でこの挙動を変更すると、左右のカーソルキーは常にページ移動となります。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop LeftRightArrowsAlwaysPage YES
		</dl>
	</tt>

<hr>

<p>
タイプセットの状況やエラーを伝えるコンソールウインドウのテキストは黒で表示されます。隠れた環境設定により、最初のエラー以降の表示テキストを赤文字にすることができます。
</p>

<BLOCKQUOTE>
<small>訳注：エラーをスキップしてタイプセットを継続すると、それ以降のコンソールテキストが赤になります。</small>
</BLOCKQUOTE>

	<tt>
		<dl>
			<dd>defaults write TeXShop RedConsoleAfterError YES
		</dl>
	</tt>

<hr>

<p>
TeXShop の編集ウインドウでは、単語の後で軟改行（ソフト・ラインブレイク）が入るようになっています。この挙動は変更させることができます──「０」は改行なし、「１」は単語の後、「２」は文字の後となります。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop LineBreakMode 1
		</dl>
	</tt>

<hr>

<p>
プレビューウインドウを開くと、当初はドロワーが非表示になっています。隠れた環境設定でこの挙動を変更すると、最初からドロワーが表示された状態でプレビューウインドウを開きます。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop PreviewDrawerOpen YES
		</dl>
	</tt>

<hr>

<p>
TeXShop を最初に Tiger 上でリリースした際にユーザが遭遇した厄介なバグは、タイプセットを数度実行した後、プログラムが次第にノロノロしてくるというものでした。このバグは公開して数日で修正しました。新しい PDF ファイルがプレビューウインドウ内の PdfKitView にロードされる際に問題が生じていました。Apple のドキュメントによれば、古いデータ・ストラクチャがメモリから解放されるはずだとのことでした。解放は起こっていました、が、それがプログラムのスローダウンを引き起こしていたのです。なのでバグフィックスとはつまり、システムをごまかしてデータ・ストラクチャがまだ使用中であると思い込ませ、システムが解放しようとしないようにさせることでした。
</p>

<p>
最近の検証ではこのバグは Tiger 10.4.4 ではそれほど深刻ではなくっているようです。なので必要に応じてデータを解放するための隠れた環境設定を追加しておきました。この設定の値は──
</p>

	<dl>
		<dd>0 ──OS 10.4.3 以降でデータを解放する
		<dd>1 ──データを解放しない
		<dd>2 ──常にデータを解放する
	</dl>

<p>
デフォルトの値は 1 です。このとき、TeXShop は以前のバージョンと同じように振る舞います。
</p>

	<tt>
		<dl>
			<dd>defaults write TeXShop ReleaseDocumentClasses 1
		</dl>
	</tt>


</div>		
		<div id="header_background"></div>
		<div id="header_logo"><a href="../TeXShop%20Help.html"><IMG HEIGHT="40" WIDTH="40" border="0" SRC="../gfx/xicnsc.gif"></a></div>
		<div id="header_chapter">TeXShop の設定はどうすればよいか？</div>
		<div id="header_title">隠れた環境設定項目</div>
		<div id="menu_border">
			<UL>
				<li><a href="configure_preliminaries.htm">まえがき</a>
				<li><a href="configure_correctinstall.htm">きちんとインストールしましたか？</a>
				<li><a href="configure_prefchanges.htm">おすすめの設定変更</a>
				<li><a href="configure_convertgraphics.htm">画像形式を自動的に変換する</a>
				<li><a href="configure_defaults.htm">初期設定について</a>
		
				<li><a href="configure_latextemplate.htm">デフォルトの LaTeX テンプレート</a>
				<li><a href="configure_hidden.htm">隠れた環境設定項目</a>
				<li><a href="configure_plist.htm">.plist ファイル</a>
				<li><a href="configure_panel.htm">LaTeX パネルを一部変更する</a>
				<li><a href="configure_autocompletion.htm">オートコンプリートを変更する</a>
		
				<li><a href="configure_menushortcuts.htm">メニュー項目のショートカットキーを再定義する</a>
				<li><a href="configure_macros.htm">マクロメニューを変更する</a>
			</UL>
		</div>
</BODY>

</HTML>
