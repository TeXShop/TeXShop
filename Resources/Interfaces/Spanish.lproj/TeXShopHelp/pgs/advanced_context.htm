<HTML>

<HEAD>
		<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=iso-8859-1">
		<TITLE>ConTeXt y MetaPost</TITLE>
		<META NAME="copyright" CONTENT="Copyright (c) 2003 Richard Koch bajo licencia FDL de GNU">
		<META NAME="description" CONTENT="context; metapost; ejemplos de context; ejemplos de metapost">
		<link href="../sty/screen.css" rel="stylesheet" media="all">
	</HEAD>

<BODY>
	<div id="content_border">
		<P>ConTeXt es un paquete de macros de prop&oacute;sito general para TeX, desarrollado por Hans Hagen; para algunos es una alternativa seria a LaTeX. Ver detalles en <a href="http://www.pragma-ade.com/">http://www.pragma-ade.com/</a>. Se puede encontrar una &uacute;til introducci&oacute;n en <a href="http://berend.gameren.nl/tex/">http://berend.gameren.nl/tex/</a>, en el documento &laquo;LaTeX in proper ConTeXt&raquo;. TeXShop soporta ConTeXt.</P>
		<p>MetaPost es un sistema similar a MetaFont que ha sido desarrollado por John Hobby; obtiene como salida archivos postscript y pdf. Se puede usar para producir ilustraciones en PostScript. Ver detalles en <a href="http://cm.bell-labs.com/who/hobby/MetaPost.html">http://cm.bell-labs.com/who/hobby/MetaPost.html</a>.  Adem&aacute;s, se pueden encontrar interesantes ejemplos elaborados con MetaPost en muchos sitios: ver, por ejemplo, <a href="http://www.cs.ucc.ie/%7edongen/mpost/mpost.html">http://www.cs.ucc.ie/~dongen/mpost/mpost.html</a>. TeXShop soporta MetaPost.</p>
		<p>He aqu&iacute; un ejemplo de un archivo MetaPost:</p>
		<dl>
			<dd><tt>prologues:=2;</tt>
			<dd><tt>color yellow; yellow = green + red;</tt>
			<dd><tt>def star (expr size, n, pos, color)=</tt>
			<dd><tt>for a=0 step 360/n until 360:</tt>
			<dd><tt>draw (origin -- (size/2,0))</tt>
			<dd><tt>rotatedaround (origin, a)</tt>
			<dd><tt>shifted pos withcolor color;</tt>
			<dd><tt>endfor ;</tt>
			<dd><tt>enddef;</tt>
			<dd><br>
			<dd><tt>beginfig(-1);</tt>
			<dd><tt>pickup pencircle scaled 2mm; star (2cm,5,origin,red);</tt>
			<dd><tt>endfig;</tt>
			<dd><br>
			<dd><tt>beginfig(2);</tt>
			<dd><tt>pickup pencircle scaled 2mm; star (2cm,7,origin,yellow);</tt>
			<dd><tt>endfig;</tt>
			<dd><br>
			<dd><tt>beginfig(3);</tt>
			<dd><tt>pickup pencircle scaled 2mm; star (2cm,11,origin,green);</tt>
			<dd><tt>endfig;</tt>
			<dd><br>
			<dd><tt>beginfig(4);</tt>
			<dd><tt>pickup pencircle scaled 2mm; star (2cm,13,origin,blue);</tt>
			<dd><tt>endfig;</tt>
			<dd><br>
			<dd><tt>end</tt>
		</dl>
		<p>Sup&oacute;n que este archivo se llama &laquo;metademo.mp&raquo;. Al procesarlo con MetaPost, generar&aacute; cuatro archivos postscript diferentes, llamados metademo.1, metademo.2, metademo.3, metademo.4. Estos nombres est&aacute;n determinados por el par&aacute;metro num&eacute;rico de &laquo;beginfig()&raquo;. Si este n&uacute;mero no es negativo, como beginfig(0) o beginfig(10), el archivo resultante se llamar&aacute; metademo.0 o metademo.10. Si este n&uacute;mero es negativo, como beginfig(-10), el archivo resultante se llamar&aacute; metademo.ps, sobreescribiendo cualquier archivo metademo.ps creado previamente.</p>
		<p>En su configuraci&oacute;n predeterminada, TeXShop asume que uno de los n&uacute;meros es cero. TeXShop llama al script epstopdf para convertir cada archivo postscript en un archivo pdf. Finalmente, el script renombra el archivo pdf marcado como n&uacute;mero cero, y le pone el nombre del c&oacute;digo con extensi&oacute;n pdf, por ejemplo, metademo.pdf, y muestra este archivo en la ventana de los pdf.</p>
		<p>Cuando est&eacute;s editando un archivo MetaPost, cambia el n&uacute;mero de la figura que est&eacute;s editando de positivo a cero. TeXShop mostrar&aacute; esta figura como si estuviera siendo depurada (&lsquo;debugged&rsquo;). Cuando est&eacute;s satisfecho con la figura, vuelve a poner el n&uacute;mero positivo, y cambia el n&uacute;mero de otra figura de positivo a cero.</p>
		<p>Una vez que los archivos MetaPost est&aacute;n creados, pueden usarse y visualizarse como cualquier otra ilustraci&oacute;n. Se puede usar Pdflatex si las ilustraciones est&aacute;n ya en formato pdf, o TeX y Ghostscript para incluir ilustraciones postscript sin convertir. Por ejemplo, podremos ver las cuatro ilustraciones creadas con el c&oacute;digo MetaPost anterior compilando el siguiente archivo mediante TeX y Ghostscript:</p>
		<dl>
			<dd><tt>\documentclass[11pt] {article}</tt>
			<dd><tt>\usepackage{graphicx}</tt>
			<dd><tt>\begin{document}</tt>
			<dd><tt>Here are some illustrations.</tt>
			<dd><tt>\vspace{.2in}</tt>
			<dd><tt>\includegraphics[width=1cm]{metademo.1}</tt>
			<dd><tt>\hfill</tt>
			<dd><tt>\includegraphics[width=1cm]{metademo.2}</tt>
			<dd><tt>\hfill</tt>
			<dd><tt>\includegraphics[width=1cm]{metademo.3}</tt>
			<dd><tt>\hfill</tt>
			<dd><tt>\includegraphics[width=1cm]{metademo.4}</tt>
			<dd><tt>\hfill</tt>
			<dd><tt>\end{document}</tt>
		</dl>
		<p></p>
		<ul>
			
		</ul>

		<p>Usando el paquete mfpic, tambi&eacute;n podemos incluir c&oacute;digo Metapot directamente en un archivo LaTeX. Al usar este m&eacute;todo, las preferencias para Metapost, que se controlan en el di&aacute;logo de Preferencias, se deben poner como &laquo;mpost&raquo;, no como &laquo;mptopdf&raquo;; esto permite que MetaPost se ejecute directamente cuando seleccionamos el motor Metapost. Un documento que contenga c&oacute;digo Metapost se compone primero con pdflatex o latex, y as&iacute; se crea un archivo con c&oacute;digo mp con todas las ilustraciones del documento. Y este archivo se compila con Metapost. Finalmente, el documento se compone de nuevo con pdflatex o latex, y as&iacute; se muestran las ilustraciones resultantes. </p>


<p>A continuaci&oacute;n mostramos un ejemplo creado por Claus Gerhardt. Guarda este ejemplo como &laquo;MetaPostTest&raquo;. Observa la l&iacute;nea
&laquo;\opengraphsfile{MetaPostTest}&raquo; en el c&oacute;digo fuente. El paquete mfpic permite cualquier nombre para este archivo gr&aacute;fico pero, si queremos usar el siguiente procedimiento con TeXShop, su nombre debe coincidir con el nombre del documento.
Comp&oacute;n el documento una vez, vuelve a MetaPost y comp&oacute;n de nuevo, y por &uacute;ltimo, comp&oacute;n con LaTeX una vez m&aacute;s.
En el primer y tercer paso de este proceso se puede usar tanto pdflatex como latex + ghostscript.

</p>


<tt>
<dl>
<dd>% This example is a shortened version of an example provided by
<dd>% Claus Gerhardt.
<dd><p> 
<dd>\documentclass[11pt]{article}
<dd>\usepackage[metapost]{mfpic}
<dd>\usepackage{amsmath}
<dd>\opengraphsfile{MetaPostTest}
<dd><p>
<dd>\title{Brief Article}
<dd>\author{The Author}
<dd>\begin{document}
<dd>\maketitle
<dd><p>
<dd>\begin{mfpic}[20]{-0.5}{11}{-0.5}{11}
<dd>{\drawcolor{red}\function{0,10,0.05}{10-x}}
<dd>{\drawcolor{blue}\function{0.99,10,0.05}{10/x}}
<dd>{\drawcolor{green}\dashed\lines{(0.0,4),(10,4)}}
<dd>\tlabelcolor{black}
<dd>\drawcolor{black}\ymarks[4pt]{4}
<dd>\headcolor{black}
<dd>\drawcolor{2*black}\axes
<dd>\tlabel{(4,6.5)}{$P_{\negthickspace c}$}
<dd>\tlabel{(6,6.5)}{$P_{c}$}
<dd>\tlabel(5,3.5){$A$}
<dd>\tlabel{(-.6,3.9)}{$4$}
<dd>\end{mfpic}
<dd><p>
<dd>\begin{center}
<dd>\begin{mfpic}[15]{-2.2}{5}{-2.2}{2.2}
<dd>\store{a}{\circle{(0,0),2}}
<dd>\store{b}{\circle{(2 *sqrt 2,0),2}}
<dd>\store{c}{\arc[p]{(0,0),-45,45,2}}
<dd>\gfill[0.7white]\lclosed\mfobj{a}
<dd>\gfill[white]\lclosed\mfobj{b}
<dd>\draw\mfobj{a}\draw\mfobj{b}
<dd>\tlabel(-1,-0.3){ $A$ }
<dd>\tlabel(3,-0.3){ $B$ }
<dd>\end{mfpic}
<dd>\end{center}
<dd><p>
 <dd>\closegraphsfile
<dd>\end{document}
		</dl>
</tt>


		<p>El siguiente ejemplo, de nuevo proporcionado
por Claus Gerhardt, muestra la potencia de MetaPost. </p>


<tt>
<dl>

<dd>% This example was provided by Claus Gerhardt
<dd>% Most of the figures and the text are taken from G.'s book
<dd>% "Analysis I" published by International Press, Boston,
<dd>% which will appear at the beginning of 2004.
<dd><p>
<dd>\documentclass[11pt]{amsart}
<dd>\usepackage[metapost]{mfpic}
<dd>\usepackage{amsmath}
<dd>\usepackage{amsthm}
<dd>\RequirePackage{amssymb}
<dd>\RequirePackage[mathscr]{eucal}
<dd>\opengraphsfile{MetaPostTest}
<dd><p>
<dd>\DeclareMathOperator*{\Au}{\forall}
<dd>\DeclareMathOperator*{\Eu}{\exists}
<dd>\newcommand{\msc}{\protect\mathscr}
<dd>\newcommand\su{\subset}
<dd>\newcommand{\pri}[1]{#1^\prime}
<dd>\newcommand{\tit}[1]{\textit{\ignorespaces #1\ignorespaces}}
<dd>\newcommand{\Cc}{{\protect\mathbb C}}
<dd>\newcommand\ra{\rightarrow}
<dd>\newcommand{\abs}[1]{\lvert#1\rvert}
<dd>\newcommand{\fv}[2]{#1\hspace{0pt}_{|_{#2}}}
<dd>\newcommand{\set}[2]{\{\,#1\colon #2\,\}}
<dd>\newcommand\inn[1]{{\overset{\msp[9]\circ}{#1}}}
<dd>\newcommand{\msp}[1][1]{\mspace{#1mu}}
<dd>\newcommand{\Si}{\varSigma}
<dd><p>
<dd>\theoremstyle{remark}
<dd>\newtheorem*{definition}{\bf Definition}
<dd>\theoremstyle{theorem}
<dd>\newtheorem*{theorem}{Theorem}
<dd><p>
<dd>\title{An Example of how to use mfpic}
<dd>%\author{The Author}
<dd><p>
<dd>\begin{document}
<dd>\maketitle
<dd>\thispagestyle{empty}
<dd><p>
<dd>\bigskip
<dd>\begin{mfpic}[20]{-0.5}{11}{-0.5}{11}
<dd>{\drawcolor{red}\function{0,10,0.05}{10-x}}
<dd>{\drawcolor{blue}\function{0.99,10,0.05}{10/x}}
<dd>{\drawcolor{green}\dashed\lines{(0.0,4),(10,4)}}
<dd>\tlabelcolor{black}
<dd>\drawcolor{black}\ymarks[4pt]{4}
<dd>\headcolor{black}
<dd>\drawcolor{2*black}\axes
<dd>\tlabel{(4,6.5)}{$P_{\negthickspace c}$}
<dd>\tlabel(5,3.5){$A$}
<dd>\tlabel{(-.6,3.9)}{$4$}
<dd>\end{mfpic}
<dd><p>
<dd>\bigskip
<dd>\begin{definition}
<dd>Let $E,\pri E$ be metric spaces  and $f:E\rightarrow \pri E$ a map. $f$ is called \tit{continuous} at $x_0\in E$ if
<dd>\begin{equation}\notag
<dd>\Au_{\pri U\in \msc U(f(x_0))}\; \Eu_{U\in \msc U(x_0)}\quad f(U)\su \pri U.
<dd>\end{equation}
<dd>$f$ is called continuous in $E$ if $f$ is continuous at every point of $E$.
<dd>\end{definition}
<dd><p>
<dd>\bigskip
<dd>\begin{center}
<dd>\begin{mfpic}[15]{-4.2}{16}{-4.2}{4.2}
<dd>\store{R}{\rect{(-4,-4),(4,4)}}
<dd>\store{U}{\cyclic[.75]{(-2,-2),(0,-1.5),(2,-2.4),(1.8,2),(0.5,1.8),(-2.3,1.7)}}
<dd>\store{FU}{\shiftpath{(12,0)}\cyclic[.75]{(-1.5,-1.5),(0,-1.2),(2,-1.7),(1.8,2),(0,1.6),(-2,1)}}
<dd>\store{UU}{\shiftpath{(12,0)}\cyclic[.75]{(-2.8,-3),(0,-2),(3,-2.4),(2.8,2.8),(0.5,2.4),(-2.9,1.7)}}
<dd>\gfill[0.6white]\mfobj{U}
<dd>\gfill[0.8white]\mfobj{UU}
<dd>\gfill[0.6white]\mfobj{FU}
<dd>\draw\mfobj{U}
<dd>\draw\mfobj{UU}
<dd>\draw\mfobj{R}
<dd>\draw\mfobj{FU}
<dd>\arrow\curve[1]{(3,2),(6,3),(9,2)}
<dd>\point{(0,0),(12,0)}
<dd>\shiftpath{(12,0)}\mfobj{R}
<dd>\tlabel[tc](0,3.5){$E$}
<dd>\tlabel[tc](12,3.5){$E'$}
<dd>\tlabel[tl](-2,0){$U$}
<dd>\tlabel[tl](10.1,1){$f(U)$}
<dd>\tlabel[tl](9,-1){$U'$}
<dd>\tlabel[tl](0.1,0){ $x_0$ }
<dd>\tlabel[tl](12.1,0){ $f(x_0)$ }
<dd>\tlabel[tc](6.1,3.8){$f$}
<dd>\end{mfpic}
<dd>\end{center}
<dd><p>
<dd>\noindent
<dd>\parbox[c]{7.51cm}
<dd>{The picture on the right shows the intersection of two
<dd>sets $A$ and $B$. Notice that this intersection consists of
<dd>all points which belong to both sets.}
<dd>\hfill
<dd>\begin{minipage}{40mm}
<dd>\begin{mfpic}[15]{-2.2}{5}{-2.2}{2.2}
<dd>\store{a}{\circle{(0,0),2}}
<dd>\store{b}{\circle{(2 *sqrt 2,0),2}}
<dd>\store{c}{\arc[p]{(0,0),-45,45,2}}
<dd>\store{de}{ \arc[p]{(2 *sqrt 2,0),135,225,2}}
<dd>\store{dd}{\lclosed\connect\mfobj{de}\mfobj{c}\endconnect}
<dd>\gfill[0.7white]\mfobj{dd}
<dd>\draw\mfobj{a}\draw\mfobj{b}
<dd>\tlabel(-1,-0.3){ $A$ }
<dd>\tlabel(3,-0.3){ $B$ }
<dd>\end{mfpic}
<dd>\end{minipage}
<dd><p>
<dd>\bigskip
<dd>\begin{definition}[Complex logarithm\index{complex logarithm}]
<dd>The \tit{complex logarithm},  $\log: \Cc^* \ra S_l$, is defined by
<dd>\begin{equation}\notag
<dd>\log z=\log\abs z+i\arg_lz.
<dd>\end{equation}
<dd>It is the inverse of $\fv\exp{S_l}$, the so-called \tit{ main branch}
<dd>of the exponential function.
<dd>\end{definition}
<dd><p>
<dd>The region of discontinuity 
<dd>is now the axis
<dd>$\set{z\in\Cc^*}{\arg z=\pi}$. Thus, the exponential function 
<dd>is not only bijective in the
<dd>open strip
<dd>$\inn S_l$,
<dd>but also a differentiable homeomorphism onto
<dd>$\Si=\set{z\in\Cc^*}{\arg z\neq \pi}$ with
<dd>$\pri\exp z=\exp z\neq 0$, and therefore, in view of the previous theorem, we may conclude 
<dd><p>
<dd>\begin{theorem}
<dd>The complex logarithm is  infinitely often  differentiable in $\Si$
<dd>and
<dd>$\pri\log z=\frac{1}{z}$.
<dd>\end{theorem}
<dd><p>
<dd>\begin{mfpic}[15]{0}{20}{-2.5}{3}
<dd>\gfill[0.6white]\rect{(12,-2),(20,2)}
<dd>\gfill[0.6white]\circle{(4,0),2}
<dd>\arrow[l 5pt]\lines{(4,0),(8,0)}
<dd>\arrow[l 5pt]\lines{(4,-2.5),(4,3)}
<dd>\arrow[l 5pt]\lines{(12,0),(20,0)}
<dd>\gfill[white]\circle{(4,0),0.05}
<dd>\arrow\curve[1]{(7,2.5),(10,3.5),(13,2.5)}
<dd>\penwd{1pt}
<dd>\draw[white]\lines{(0,0),(4,0)}
<dd>\penwd{0.5pt}
<dd>\arrow[l 5pt]\lines{(16,-2.5),(16,3)}
<dd>\tlabel[cr](17.2,2.3){$\pi$}
<dd>\tlabel[cr](17.2,-2.3){$-\pi$}
<dd>\tlabel[cc](10,4){ log}
<dd>\tlabel[cc](2,2.5){ $\Si$}
<dd>\end{mfpic}%
<dd><p>
<dd>\closegraphsfile
<dd>\end{document}
</dl>
</tt>
</div>
<div id="header_background"></div>
<div id="header_logo"><a href="../TeXShop%20Help.html"><IMG HEIGHT="40" WIDTH="40" border="0" SRC="../gfx/xicnsc.gif"></a>
</div>
<div id="header_chapter">Ayuda avanzada</div><div id="header_title">ConTeXt y MetaPost</div>
	<div id="menu_border">
		<ul>
			<LI><a href="advanced_personaltetex.htm">Adici&oacute;n de estilos personales y men&uacute;s de macros a teTeX</a>
			<LI><a href="advanced_addengine.htm">Motores de composici&oacute;n adicionales</a>
			<LI><a href="advanced_removeaux.htm">Borrado de archivos AUX</a>
			<li><a href="advanced_externaleditor.htm">Uso de un editor externo</a>
			<li><a href="advanced_pdfcopypaste.htm">Copiar-pegar y arrastrar-soltar desde la ventana del PDF</a>
			<li><a href="advanced_root.htm">Establecer un documento ra&iacute;z</a>
			<li><a href="advanced_pdfsync.htm">Sincronizaci&oacute;n c&oacute;digo-pdf (pdfsync)</a>
			<li><a href="advanced_unicode.htm">Unicode</a>
			<li><a href="advanced_bibtex.htm">BibTeX</a>
			<li><a href="advanced_makeindex.htm">MakeIndex</a>
			<li><a href="advanced_otherfiles.htm">Abrir otros archivos con TeXShop</a>
			<li><a href="advanced_mathematica.htm">Mathematica</a>
			<li><a href="advanced_localization.htm">Localizaciones</a>
			<li><a href="advanced_syntaxcolor.htm">Colores para sintaxis</a>
			<li><a href="advanced_shellescape.htm">Protecci&oacute;n ante shell-escape</a>
			<li><a href="advanced_coloredtext.htm">Texto coloreado en TeX</a>
			<li><a href="advanced_moretetex.htm">M&aacute;s sobre teTeX</a>
			<li><a href="advanced_fink.htm">Coexistencia con Fink</a>
			<li><a href="advanced_otherdistributions.htm">Coexistencia con otras distribuciones de TeX</a>
			<li><a href="advanced_context.htm">ConTeXt y MetaPost</a>
			<li><a href="advanced_plist.htm">Archivos .plist</a>
			<li><a href="advanced_menushortcuts.htm">Redefinici&oacute;n de atajos de teclado de men&uacute;s</a>
		</UL>
	</div>
	</BODY>

</HTML>
